<!DOCTYPE html>
<html lang="es" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  
<!-- Mirrored from manuais.pages.iessanclemente.net/plantillas/dam/ad/03orm/jpa/10jpql/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Sep 2025 20:45:36 GMT -->
<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.140.2">
    <meta name="generator" content="Relearn 7.6.1+0b83617ee9da5253aafcf11807b256da7d88d709">
    <meta name="description" content="1. Lenguaje de consulta de Jakarta Persistence (JPQL) 1.1. Jakarta Persistence QL 1.2. API de Criterios 2. Introducción a Jakarta Persistence QL Naturaleza de Jakarta Persistence QL 2.1. Terminología 3. Consultas SELECT Procesamiento de Consultas y Resultados 3.1. Cláusula SELECT 3.1.1. Expresiones de Ruta 3.1.2. Entidades y Objetos 3.1.3 Combinación de Expresiones 3.1.4 Constructor de expresiones 3.2. Cláusula FROM 3.2.1 Variables de Identificación 3.2.2. Joins A. Inner Join A.1. Operador JOIN y campos de asociación de colección (one-to-many y many-to-many) A.2. Operador JOIN y campos de asociación de un solo valor (one-to-one y many-to-one) A.3. Condiciones de Join en la Cláusula WHERE A.4. Múltiples Joins A.5. Joins con Mapas: VALUE, KEY y ENTRY B. Outer Joins C. Fetch Joins 3.3. Clausula WHERE Parámetros de entrada Forma Básica de Expresión Expresiones BETWEEN Expresiones LIKE Subconsultas Expresiones IN Expresiones de Colecciones EXISTS ANY, ALL y SOME 3.4. Herencia y Polimorfismo 3.4.1. Discriminación de Subclases 3.4.2. Downcasting 3.5. Expresiones escalares 3.5.1. Literales 3.5.2. Function Expressions 3.5.3. Funciones Nativas de la base de datos: FUNCTION 3.5.4. Expresiones CASE 3.6. Cláusula ORDER BY 4. Consultas de Agregación 4.1 Funciones de Agregación AVG COUNT MAX MIN SUM 4.2 Cláusula GROUP BY 4.3 Cláusula HAVING 5. Consultas de Actualización 6. Consultas de borrado 1. Lenguaje de consulta de Jakarta Persistence (JPQL) Especificación de JPQL">
    <meta name="author" content="IES Tubalcain">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://manuais.pages.iessanclemente.net/images/logo-ies.png">
    <meta name="twitter:title" content="10. JPQL. :: IES Tubalcain - Acceso a datos (2º DAM)">
    <meta name="twitter:description" content="1. Lenguaje de consulta de Jakarta Persistence (JPQL) 1.1. Jakarta Persistence QL 1.2. API de Criterios 2. Introducción a Jakarta Persistence QL Naturaleza de Jakarta Persistence QL 2.1. Terminología 3. Consultas SELECT Procesamiento de Consultas y Resultados 3.1. Cláusula SELECT 3.1.1. Expresiones de Ruta 3.1.2. Entidades y Objetos 3.1.3 Combinación de Expresiones 3.1.4 Constructor de expresiones 3.2. Cláusula FROM 3.2.1 Variables de Identificación 3.2.2. Joins A. Inner Join A.1. Operador JOIN y campos de asociación de colección (one-to-many y many-to-many) A.2. Operador JOIN y campos de asociación de un solo valor (one-to-one y many-to-one) A.3. Condiciones de Join en la Cláusula WHERE A.4. Múltiples Joins A.5. Joins con Mapas: VALUE, KEY y ENTRY B. Outer Joins C. Fetch Joins 3.3. Clausula WHERE Parámetros de entrada Forma Básica de Expresión Expresiones BETWEEN Expresiones LIKE Subconsultas Expresiones IN Expresiones de Colecciones EXISTS ANY, ALL y SOME 3.4. Herencia y Polimorfismo 3.4.1. Discriminación de Subclases 3.4.2. Downcasting 3.5. Expresiones escalares 3.5.1. Literales 3.5.2. Function Expressions 3.5.3. Funciones Nativas de la base de datos: FUNCTION 3.5.4. Expresiones CASE 3.6. Cláusula ORDER BY 4. Consultas de Agregación 4.1 Funciones de Agregación AVG COUNT MAX MIN SUM 4.2 Cláusula GROUP BY 4.3 Cláusula HAVING 5. Consultas de Actualización 6. Consultas de borrado 1. Lenguaje de consulta de Jakarta Persistence (JPQL) Especificación de JPQL">
    <meta property="og:url" content="https://manuais.pages.iessanclemente.net/03orm/jpa/10jpql/index.html">
    <meta property="og:site_name" content="IES Tubalcain - Acceso a datos (2º DAM)">
    <meta property="og:title" content="10. JPQL. :: IES Tubalcain - Acceso a datos (2º DAM)">
    <meta property="og:description" content="1. Lenguaje de consulta de Jakarta Persistence (JPQL) 1.1. Jakarta Persistence QL 1.2. API de Criterios 2. Introducción a Jakarta Persistence QL Naturaleza de Jakarta Persistence QL 2.1. Terminología 3. Consultas SELECT Procesamiento de Consultas y Resultados 3.1. Cláusula SELECT 3.1.1. Expresiones de Ruta 3.1.2. Entidades y Objetos 3.1.3 Combinación de Expresiones 3.1.4 Constructor de expresiones 3.2. Cláusula FROM 3.2.1 Variables de Identificación 3.2.2. Joins A. Inner Join A.1. Operador JOIN y campos de asociación de colección (one-to-many y many-to-many) A.2. Operador JOIN y campos de asociación de un solo valor (one-to-one y many-to-one) A.3. Condiciones de Join en la Cláusula WHERE A.4. Múltiples Joins A.5. Joins con Mapas: VALUE, KEY y ENTRY B. Outer Joins C. Fetch Joins 3.3. Clausula WHERE Parámetros de entrada Forma Básica de Expresión Expresiones BETWEEN Expresiones LIKE Subconsultas Expresiones IN Expresiones de Colecciones EXISTS ANY, ALL y SOME 3.4. Herencia y Polimorfismo 3.4.1. Discriminación de Subclases 3.4.2. Downcasting 3.5. Expresiones escalares 3.5.1. Literales 3.5.2. Function Expressions 3.5.3. Funciones Nativas de la base de datos: FUNCTION 3.5.4. Expresiones CASE 3.6. Cláusula ORDER BY 4. Consultas de Agregación 4.1 Funciones de Agregación AVG COUNT MAX MIN SUM 4.2 Cláusula GROUP BY 4.3 Cláusula HAVING 5. Consultas de Actualización 6. Consultas de borrado 1. Lenguaje de consulta de Jakarta Persistence (JPQL) Especificación de JPQL">
    <meta property="og:locale" content="es">
    <meta property="og:type" content="article">
    <meta property="article:section" content="UD 3. Object/Relational Mapping (ORM). JPA e Hibernate">
    <meta property="article:modified_time" content="2025-06-06T08:52:44+00:00">
    <meta property="og:image" content="https://manuais.pages.iessanclemente.net/images/logo-ies.png">
    <meta itemprop="name" content="10. JPQL. :: IES Tubalcain - Acceso a datos (2º DAM)">
    <meta itemprop="description" content="1. Lenguaje de consulta de Jakarta Persistence (JPQL) 1.1. Jakarta Persistence QL 1.2. API de Criterios 2. Introducción a Jakarta Persistence QL Naturaleza de Jakarta Persistence QL 2.1. Terminología 3. Consultas SELECT Procesamiento de Consultas y Resultados 3.1. Cláusula SELECT 3.1.1. Expresiones de Ruta 3.1.2. Entidades y Objetos 3.1.3 Combinación de Expresiones 3.1.4 Constructor de expresiones 3.2. Cláusula FROM 3.2.1 Variables de Identificación 3.2.2. Joins A. Inner Join A.1. Operador JOIN y campos de asociación de colección (one-to-many y many-to-many) A.2. Operador JOIN y campos de asociación de un solo valor (one-to-one y many-to-one) A.3. Condiciones de Join en la Cláusula WHERE A.4. Múltiples Joins A.5. Joins con Mapas: VALUE, KEY y ENTRY B. Outer Joins C. Fetch Joins 3.3. Clausula WHERE Parámetros de entrada Forma Básica de Expresión Expresiones BETWEEN Expresiones LIKE Subconsultas Expresiones IN Expresiones de Colecciones EXISTS ANY, ALL y SOME 3.4. Herencia y Polimorfismo 3.4.1. Discriminación de Subclases 3.4.2. Downcasting 3.5. Expresiones escalares 3.5.1. Literales 3.5.2. Function Expressions 3.5.3. Funciones Nativas de la base de datos: FUNCTION 3.5.4. Expresiones CASE 3.6. Cláusula ORDER BY 4. Consultas de Agregación 4.1 Funciones de Agregación AVG COUNT MAX MIN SUM 4.2 Cláusula GROUP BY 4.3 Cláusula HAVING 5. Consultas de Actualización 6. Consultas de borrado 1. Lenguaje de consulta de Jakarta Persistence (JPQL) Especificación de JPQL">
    <meta itemprop="dateModified" content="2025-06-06T08:52:44+00:00">
    <meta itemprop="wordCount" content="14313">
    <meta itemprop="image" content="https://manuais.pages.iessanclemente.net/images/logo-ies.png">
    <title>10. JPQL. :: IES Tubalcain - Acceso a datos (2º DAM)</title>
    <link href="https://manuais.pages.iessanclemente.net/plantillas/dam/ad/03orm/jpa/10jpql/index.xml" rel="alternate" type="application/rss+xml" title="10. JPQL. :: IES Tubalcain - Acceso a datos (2º DAM)">
    <link href="https://manuais.pages.iessanclemente.net/plantillas/dam/ad/03orm/jpa/10jpql/index.print.html" rel="alternate" type="text/html" title="10. JPQL. :: IES Tubalcain - Acceso a datos (2º DAM)">
    <link href="../../../fonts/fontawesome/css/fontawesome-all.min3c2e.css?1749199978" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../fonts/fontawesome/css/fontawesome-all.min3c2e.css?1749199978" rel="stylesheet"></noscript>
    <link href="../../../css/perfect-scrollbar/perfect-scrollbar.min3c2e.css?1749199978" rel="stylesheet">
    <link href="../../../css/theme.min3c2e.css?1749199978" rel="stylesheet">
    <link href="../../../css/format-html.min3c2e.css?1749199978" rel="stylesheet" id="R-format-style">
    <link href="../../../css/auto-complete/auto-complete.min3c2e.css?1749199978" rel="stylesheet">
    <script src="../../../js/auto-complete/auto-complete.min3c2e.js?1749199978" defer></script>
    <script src="../../../js/lunr/lunr.min3c2e.js?1749199978" defer></script>
    <script src="../../../js/lunr/lunr.stemmer.support.min3c2e.js?1749199978" defer></script>
    <script src="../../../js/lunr/lunr.multi.min3c2e.js?1749199978" defer></script>
    <script src="../../../js/lunr/lunr.es.min3c2e.js?1749199978" defer></script>
    <script src="../../../js/search.min3c2e.js?1749199978" defer></script>
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='#\/03orm\/jpa\/10jpql\/index.html';
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='';
      window.relearn.contentLangs=['es'];
      window.relearn.index_js_url="../../../searchindex.es3c2e.js?1749199978";
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // variant stuff
      window.relearn.themevariants = [ 'blue', 'relearn-light', 'relearn-dark', 'learn', 'neon', 'green', 'red' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
      // translations
      window.T_Copy_to_clipboard = `Copiar en el portapapeles`;
      window.T_Copied_to_clipboard = `¡Copiado al portapapeles!`;
      window.T_Copy_link_to_clipboard = `Copiar enlace al portapapeles`;
      window.T_Link_copied_to_clipboard = `¡Enlace copiado al portapapeles!`;
      window.T_Reset_view = `Restablecer vista`;
      window.T_View_reset = `¡Ver reajuste!`;
      window.T_No_results_found = `No se han encontrado resultados para "{0}"`;
      window.T_N_results_found = `{1} resultados encontrados para "{0}"`;
    </script><style>
    :root {
    --MENU-WIDTH-S: 14.375rem;
    --MENU-WIDTH-M: 14.375rem;
    --MENU-WIDTH-L: 18.75rem;
}

@media screen and (max-width: 70.5rem) {
    #R-sidebar {
        min-width: var(--INTERNAL-MENU-WIDTH-S);
        max-width: var(--INTERNAL-MENU-WIDTH-S);
        width: var(--INTERNAL-MENU-WIDTH-S);
    }
    #R-body {
        margin-inline-start: var(--INTERNAL-MENU-WIDTH-S);
        min-width: calc( 100% - var(--INTERNAL-MENU-WIDTH-S) );
        max-width: calc( 100% - var(--INTERNAL-MENU-WIDTH-S) );
        width: calc( 100% - var(--INTERNAL-MENU-WIDTH-S) );
    }
}
@media screen and (max-width: 70.5rem) {
     

    .mobile-support #R-sidebar {
        inset-inline-start: calc( -1 * var(--INTERNAL-MENU-WIDTH-S) );
        min-width: var(--INTERNAL-MENU-WIDTH-S);
        max-width: var(--INTERNAL-MENU-WIDTH-S);
        width: var(--INTERNAL-MENU-WIDTH-S);
    }
    .mobile-support #navshow{
        display: inline;
    }
    .mobile-support #R-body {
        min-width: 100%;
        max-width: 100%;
        width: 100%;
    }
    .mobile-support #R-body {
        margin-inline-start: 0;
    }
    .mobile-support.sidebar-flyout {
        overflow: hidden;
    }
    .mobile-support.sidebar-flyout #R-sidebar {
        inset-inline-start: 0;
        z-index: 90;
    }
    .mobile-support.sidebar-flyout #R-body {
        margin-inline-start: var(--INTERNAL-MENU-WIDTH-S);
        overflow: hidden;
    }
    .mobile-support.sidebar-flyout #R-body-overlay{
        background-color: rgba( 134, 134, 134, .5 );
        bottom: 0;
        cursor: pointer;
        height: 100vh;
        left: 0;
        position: absolute;
        right: 0;
        top: 0;
        z-index: 190;
    }
}

</style>


  </head>
  <body class="mobile-support html" data-url="../../../03orm/jpa/10jpql/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menú (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>

            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Tabla de contenido (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#1-lenguaje-de-consulta-de-jakarta-persistence-jpql">1. Lenguaje de consulta de Jakarta Persistence (JPQL)</a>
      <ul>
        <li><a href="#11-jakarta-persistence-ql">1.1. Jakarta Persistence QL</a></li>
      </ul>
    </li>
    <li><a href="#12-api-de-criterios">1.2. API de Criterios</a></li>
    <li><a href="#2-introducción-a-jakarta-persistence-ql">2. Introducción a Jakarta Persistence QL</a>
      <ul>
        <li></li>
        <li><a href="#21-terminología">2.1. Terminología</a></li>
      </ul>
    </li>
    <li><a href="#3-consultas-select">3. Consultas SELECT</a>
      <ul>
        <li></li>
        <li><a href="#31-cláusula-select">3.1. Cláusula SELECT</a></li>
        <li><a href="#32-cláusula-from">3.2. Cláusula FROM</a></li>
        <li><a href="#322-joins">3.2.2. Joins</a></li>
        <li><a href="#33-clausula-where">3.3. Clausula WHERE</a></li>
        <li><a href="#34-herencia-y-polimorfismo">3.4. Herencia y Polimorfismo</a></li>
        <li><a href="#35-expresiones-escalares">3.5. Expresiones escalares</a></li>
        <li><a href="#36-cláusula-order-by">3.6. Cláusula ORDER BY</a></li>
      </ul>
    </li>
    <li><a href="#4-consultas-de-agregación">4. Consultas de Agregación</a>
      <ul>
        <li><a href="#41-funciones-de-agregación">4.1 Funciones de Agregación</a></li>
        <li><a href="#avg">AVG</a></li>
        <li><a href="#count">COUNT</a></li>
        <li><a href="#max">MAX</a></li>
        <li><a href="#min">MIN</a></li>
        <li><a href="#sum">SUM</a></li>
        <li><a href="#42-cláusula-group-by">4.2 Cláusula GROUP BY</a></li>
        <li><a href="#43-cláusula-having">4.3 Cláusula HAVING</a></li>
      </ul>
    </li>
    <li><a href="#5-consultas-de-actualización">5. Consultas de Actualización</a></li>
    <li><a href="#6-consultas-de-borrado">6. Consultas de borrado</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList">
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="../../../index.html"><span itemprop="name">Acceso a datos</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li>
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="../../index.html"><span itemprop="name">UD 3. Object/Relational Mapping (ORM). JPA e Hibernate</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li>
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="../index.html"><span itemprop="name">03.01. Jakarta Persistence (JPA).</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li>
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">10. JPQL.</span><meta itemprop="position" content="4"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="https://manuais.pages.iessanclemente.net/plantillas/dam/ad/03orm/jpa/10jpql/index.print.html" title="Imprimir todo el capítulo (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../09queries/index.html" title="09. Consultas. (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../11paginacion/index.html" title="11. Paginación de consultas. (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Más"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable 03orm" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="10-jpql">10. JPQL.</h1>

<!-- TOC -->
<ul>
<li><a href="index.html#1-lenguaje-de-consulta-de-jakarta-persistence-jpql">1. Lenguaje de consulta de Jakarta Persistence (JPQL)</a>
<ul>
<li><a href="index.html#11-jakarta-persistence-ql">1.1. Jakarta Persistence QL</a></li>
</ul>
</li>
<li><a href="index.html#12-api-de-criterios">1.2. API de Criterios</a></li>
<li><a href="index.html#2-introducción-a-jakarta-persistence-ql">2. Introducción a Jakarta Persistence QL</a>
<ul>
<li><a href="index.html#naturaleza-de-jakarta-persistence-ql">Naturaleza de Jakarta Persistence QL</a></li>
<li><a href="index.html#21-terminología">2.1. Terminología</a></li>
</ul>
</li>
<li><a href="index.html#3-consultas-select">3. Consultas SELECT</a>
<ul>
<li><a href="index.html#procesamiento-de-consultas-y-resultados">Procesamiento de Consultas y Resultados</a></li>
<li><a href="index.html#31-cláusula-select">3.1. Cláusula SELECT</a>
<ul>
<li><a href="index.html#311-expresiones-de-ruta">3.1.1. Expresiones de Ruta</a></li>
<li><a href="index.html#312-entidades-y-objetos">3.1.2. Entidades y Objetos</a></li>
<li><a href="index.html#313-combinación-de-expresiones">3.1.3 Combinación de Expresiones</a></li>
<li><a href="index.html#314-constructor-de-expresiones">3.1.4 Constructor de expresiones</a></li>
</ul>
</li>
<li><a href="index.html#32-cláusula-from">3.2. Cláusula FROM</a>
<ul>
<li><a href="index.html#321-variables-de-identificación">3.2.1 Variables de Identificación</a></li>
</ul>
</li>
<li><a href="index.html#322-joins">3.2.2. Joins</a>
<ul>
<li><a href="index.html#a-inner-join">A. Inner Join</a>
<ul>
<li><a href="index.html#a1-operador-join-y-campos-de-asociación-de-colección-one-to-many-y-many-to-many">A.1. Operador JOIN y campos de asociación de colección (one-to-many y many-to-many)</a></li>
<li><a href="index.html#a2-operador-join-y-campos-de-asociación-de-un-solo-valor-one-to-one-y-many-to-one">A.2. Operador JOIN y campos de asociación de un solo valor (one-to-one y many-to-one)</a></li>
<li><a href="index.html#a3-condiciones-de-join-en-la-cláusula-where">A.3. Condiciones de Join en la Cláusula WHERE</a></li>
<li><a href="index.html#a4-múltiples-joins">A.4. Múltiples Joins</a></li>
<li><a href="index.html#a5-joins-con-mapas-value-key-y-entry">A.5. Joins con Mapas: <code>VALUE</code>, <code>KEY</code> y <code>ENTRY</code></a></li>
</ul>
</li>
<li><a href="index.html#b-outer-joins">B. Outer Joins</a></li>
<li><a href="index.html#c-fetch-joins">C. Fetch Joins</a></li>
</ul>
</li>
<li><a href="index.html#33-clausula-where">3.3. Clausula WHERE</a>
<ul>
<li><a href="index.html#parámetros-de-entrada">Parámetros de entrada</a></li>
<li><a href="index.html#forma-básica-de-expresión">Forma Básica de Expresión</a></li>
<li><a href="index.html#expresiones-between">Expresiones BETWEEN</a></li>
<li><a href="index.html#expresiones-like">Expresiones LIKE</a></li>
<li><a href="index.html#subconsultas">Subconsultas</a></li>
<li><a href="index.html#expresiones-in">Expresiones IN</a></li>
<li><a href="index.html#expresiones-de-colecciones">Expresiones de Colecciones</a></li>
<li><a href="index.html#exists">EXISTS</a></li>
<li><a href="index.html#any-all-y-some">ANY, ALL y SOME</a></li>
</ul>
</li>
<li><a href="index.html#34-herencia-y-polimorfismo">3.4. Herencia y Polimorfismo</a>
<ul>
<li><a href="index.html#341-discriminación-de-subclases">3.4.1. Discriminación de Subclases</a></li>
<li><a href="index.html#342-downcasting">3.4.2. Downcasting</a></li>
</ul>
</li>
<li><a href="index.html#35-expresiones-escalares">3.5. Expresiones escalares</a>
<ul>
<li><a href="index.html#351-literales">3.5.1. Literales</a></li>
<li><a href="index.html#352-function-expressions">3.5.2. Function Expressions</a></li>
<li><a href="index.html#353-funciones-nativas-de-la-base-de-datos-function">3.5.3. Funciones Nativas de la base de datos: FUNCTION</a></li>
<li><a href="index.html#354-expresiones-case">3.5.4. Expresiones CASE</a></li>
</ul>
</li>
<li><a href="index.html#36-cláusula-order-by">3.6. Cláusula ORDER BY</a></li>
</ul>
</li>
<li><a href="index.html#4-consultas-de-agregación">4. Consultas de Agregación</a>
<ul>
<li><a href="index.html#41-funciones-de-agregación">4.1 Funciones de Agregación</a></li>
<li><a href="index.html#avg">AVG</a></li>
<li><a href="index.html#count">COUNT</a></li>
<li><a href="index.html#max">MAX</a></li>
<li><a href="index.html#min">MIN</a></li>
<li><a href="index.html#sum">SUM</a></li>
<li><a href="index.html#42-cláusula-group-by">4.2 Cláusula GROUP BY</a></li>
<li><a href="index.html#43-cláusula-having">4.3 Cláusula HAVING</a></li>
</ul>
</li>
<li><a href="index.html#5-consultas-de-actualización">5. Consultas de Actualización</a></li>
<li><a href="index.html#6-consultas-de-borrado">6. Consultas de borrado</a></li>
</ul>
<!-- TOC -->
<h2 id="1-lenguaje-de-consulta-de-jakarta-persistence-jpql">1. Lenguaje de consulta de Jakarta Persistence (JPQL)</h2>
<p><a href="https://jakarta.ee/specifications/persistence/3.1/jakarta-persistence-spec-3.1#a4665" rel="external" target="_blank">Especificación de JPQL</a></p>
<p>La API de Persistencia de Jakarta proporciona dos métodos para consultar entidades:</p>
<ul>
<li>El <strong>lenguaje de consulta de la API de Persistencia de Jakarta (Jakarta Persistence QL)</strong>.</li>
<li><strong>API Criteria</strong>.</li>
</ul>
<h3 id="11-jakarta-persistence-ql">1.1. Jakarta Persistence QL</h3>
<p><strong>Jakarta Persistence QL es el lenguaje de consulta estándar</strong> basado en <strong>String</strong> de la API de Persistencia de Jakarta.</p>
<p>Es un lenguaje de consulta <strong>portable</strong> que combina <strong>la sintaxis y la semántica de SQL</strong> con la <strong>de un lenguaje de expresión orientado a objetos</strong>. Las consultas escritas utilizando este lenguaje pueden compilarse de forma portátil a SQL en todos los servidores de bases de datos principales.</p>
<h2 id="12-api-de-criterios">1.2. API de Criterios</h2>
<p>La <strong>API Criteria</strong> se utiliza para <strong>crear consultas seguras para el tipo utilizando las API del lenguaje de programación Java</strong> al <strong>consultar entidades y sus relaciones</strong>.</p>
<p>De momento, no estudiaremos el API de Criteria, y nos centraremos en JPQL.</p>
<h2 id="2-introducción-a-jakarta-persistence-ql">2. Introducción a Jakarta Persistence QL</h2>
<ul>
<li><strong>Jakarta Persistence QL no es SQL</strong>. A pesar de las similitudes entre los dos lenguajes en cuanto a palabras clave y estructura general, <strong>existen diferencias muy importantes</strong>. Intentar escribir Jakarta Persistence QL como si fuera SQL es la forma más fácil de frustrarse con el lenguaje. Las similitudes entre ambos lenguajes son intencionales (brindando a los desarrolladores una idea de lo que Jakarta Persistence QL puede lograr), pero la naturaleza orientada a objetos de Jakarta Persistence QL requiere un tipo diferente de pensamiento.</li>
</ul>
<h4 id="naturaleza-de-jakarta-persistence-ql">Naturaleza de Jakarta Persistence QL</h4>
<p>Si <strong>Jakarta Persistence QL no es SQL</strong>, Jakarta Persistence QL <strong>es un lenguaje para consultar entidades</strong>.</p>
<p>En lugar de tablas y filas, proporciona <strong>consultas en términos de entidades y sus relaciones,</strong> operando sobre el estado persistente de la entidad <strong>definido en el modelo de objetos</strong>, no en el modelo físico de la base de datos.</p>
<ol>
<li>A diferencia de SQL, es <strong>portable</strong>. Jakarta Persistence QL se <strong>puede traducir a los dialectos SQL de todos los principales proveedores de bases de datos</strong>.</li>
<li>Las consultas <strong>se escriben contra el modelo de dominio de entidades persistentes</strong>, sin necesidad de saber exactamente cómo se asignan esas entidades a la base de datos.</li>
</ol>
<p>APIs de <strong>Jakarta Persistence QL vs Criteria</strong>:</p>
<ul>
<li>
<p>Las consultas de Jakarta Persistence QL son generalmente <strong>más concisas y legibles que las consultas de Criteria</strong>. Jakarta Persistence QL es <strong>fácil de aprender para programadores con conocimientos previos de SQL</strong>.</p>
</li>
<li>
<p>Las <strong>consultas de Jakarta Persistence QL no son seguras en cuanto a tipos</strong>, lo que significa que requieren una conversión cuando se recupera el resultado de la consulta del administrador de entidades. Debido a eso, los errores de conversión de tipo pueden no detectarse en tiempo de compilación. Además, las consultas de Jakarta Persistence QL no admiten parámetros de final abierto.</p>
</li>
<li>
<p>Las <strong>consultas de Criteria API son seguras en cuanto a tipos</strong> y, por lo tanto, no requieren conversión.</p>
</li>
<li>
<p>En cuanto a rendimiento entre Jakarta Persistence QL y Criteria APIs, las consultas de <strong>Criteria API proporcionan un mejor rendimiento porque las consultas dinámicas de Jakarta Persistence QL deben analizarse cada vez que se llaman</strong>.</p>
</li>
</ul>
<p>Una de las desventajas comunes de las consultas de <strong>Criteria API es que suelen requerir escribir más código que las consultas de Jakarta Persistence QL</strong>. Esto significa que los programadores deberán crear muchos objetos y realizar operaciones en esos objetos antes de enviar la consulta de Criteria API al administrador de entidades.</p>
<p>Una amplia selección de características de SQL son compatibles directamente, incluidas subconsultas, consultas de agregados, declaraciones UPDATE y DELETE, numerosas funciones de SQL, y más.</p>
<h3 id="21-terminología">2.1. Terminología</h3>
<p>Las consultas se dividen en una de cuatro categorías: <strong>select</strong>, <strong>aggregate</strong>, <strong>update</strong> y <strong>delete</strong>.</p>
<ul>
<li>Las consultas <strong>select recuperan el estado persistente de una o más entidades</strong>, filtrando los resultados según sea necesario</li>
<li>Las consultas de <strong>agregación son variaciones de las consultas select que agrupan los resultados</strong> y producen <strong>datos resumidos</strong>. Juntas, las consultas select y de agregado a veces se llaman consultas de informes, ya que se centran principalmente en generar datos para informes.</li>
<li>Las consultas de actualización y eliminación se utilizan para modificar o eliminar condicionalmente conjuntos enteros de entidades.</li>
</ul>
<p>Las consultas operan en el conjunto de entidades y embebidos definidos por una unidad de persistencia. Este <strong>conjunto de entidades y embebidos se conoce como el <em>esquema de persistencia abstracto</em></strong>, cuya colección define el dominio general desde el cual se pueden recuperar los resultados.</p>
<p>En las expresiones de consulta, las entidades se refieren por nombre. Si una entidad no ha sido nombrada explícitamente (por ejemplo, utilizando el atributo de nombre de la anotación <code>@Entity</code>), se utiliza el nombre de clase no calificado de forma predeterminada. Este nombre es el nombre de esquema abstracto de la entidad en el contexto de una consulta.</p>
<p>Las entidades están compuestas por una o más propiedades de persistencia implementadas como campos o propiedades JavaBean. El tipo de esquema abstracto de una propiedad persistente en una entidad se refiere a la clase o tipo primitivo utilizado para implementar esa propiedad. Por ejemplo, si la entidad Empleado tiene una propiedad nombre de tipo String, el tipo de esquema abstracto de esa propiedad en las expresiones de consulta también es String. Las propiedades persistentes simples sin asignación de relaciones comprenden el estado persistente de la entidad y se denominan campos de estado. Las propiedades persistentes que también son relaciones se llaman campos de asociación.</p>
<p>Las consultas se pueden definir dinámicamente o estáticamente. Los ejemplos incluyen consultas que pueden usarse dinámicamente o estáticamente, según las necesidades de la aplicación.</p>
<p>Finalmente, es importante destacar que las consultas no distinguen entre mayúsculas y minúsculas excepto en dos casos: los nombres de entidades y propiedades deben especificarse exactamente como se nombran.</p>
<h2 id="3-consultas-select">3. Consultas SELECT</h2>
<p>Las consultas SELECT son el tipo de consulta más significativo y facilitan la recuperación masiva de datos de la base de datos. No sorprendentemente, las consultas SELECT también son la forma más común de consulta utilizada en las aplicaciones. La forma general de una consulta SELECT es la siguiente:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">&lt;</span>select_expression<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> <span style="color:#f92672">&lt;</span>from_clause<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>[<span style="color:#66d9ef">WHERE</span> <span style="color:#f92672">&lt;</span>conditional_expression<span style="color:#f92672">&gt;</span>]
</span></span><span style="display:flex;"><span>[<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> <span style="color:#f92672">&lt;</span>order_by_clause<span style="color:#f92672">&gt;</span>]</span></span></code></pre></div>
<p>La forma más simple de una consulta SELECT consta de dos partes obligatorias: la cláusula SELECT y la cláusula FROM. La cláusula SELECT define el formato de los resultados de la consulta, mientras que la cláusula FROM define la entidad o entidades de las cuales se obtendrán los resultados. Considere la siguiente consulta completa que recupera todos los empleados en la empresa:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e</span></span></code></pre></div>
<p>La estructura de esta consulta es muy similar a una consulta SQL, pero con un par de diferencias importantes. La primera diferencia es que el dominio de la consulta definido en la cláusula FROM no es una tabla, sino una entidad, en este caso, la entidad Empleado. Como en SQL, se le ha asignado un alias al identificador <code>e</code>. Este valor alias se conoce como una variable de identificación y es la clave por la cual la entidad se referirá en el resto de la declaración SELECT. A diferencia de las consultas en SQL, donde un alias de tabla es opcional, el uso de variables de identificación es obligatorio en Jakarta Persistence QL.</p>
<p>La segunda diferencia es que la cláusula SELECT en este ejemplo no enumera los campos de la tabla ni utiliza un comodín para seleccionar todos los campos. En cambio, solo se enumera la variable de identificación para indicar que el tipo de resultado de la consulta es la entidad Empleado, no un conjunto tabular de filas.</p>
<h4 id="procesamiento-de-consultas-y-resultados">Procesamiento de Consultas y Resultados</h4>
<p>A medida que el procesador de consultas itera sobre el conjunto de resultados devuelto por la base de datos, convierte los datos de filas y columnas tabulares en un conjunto de instancias de entidad. El método <code>getResultList()</code> de la interfaz Query devolverá una colección de cero o más objetos Empleado después de evaluar la consulta. A pesar de las diferencias en estructura y sintaxis, cada consulta es traducible a SQL.</p>
<p>Para ejecutar una consulta, el motor de consultas primero construye una representación SQL óptima de la consulta de Jakarta Persistence QL. La consulta SQL resultante es la que realmente se ejecuta en la base de datos. En este ejemplo simple, el SQL podría parecer algo así, dependiendo de los metadatos de mapeo para la entidad <code>Empleado</code>:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> id, nombre, salario, idGestor, idDepartamento, idDireccion
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> emp</span></span></code></pre></div>
<p>La instrucción SQL debe leer todas las columnas mapeadas necesarias para crear la instancia de entidad, incluidas las columnas de clave externa. Incluso si la entidad está en caché en la memoria, el motor de consultas aún leerá típicamente todos los datos necesarios para asegurarse de que la versión en caché esté actualizada. Tenga en cuenta que si las relaciones entre Empleado y las entidades Departamento o Direccion requirieran una carga ansiosa (eager loading), la instrucción SQL se extendería para recuperar los datos adicionales o se agruparían múltiples instrucciones para construir completamente la entidad Empleado. Cada proveedor proporcionará algún método para mostrar el SQL que genera al traducir Jakarta Persistence QL. Para la optimización del rendimiento en particular, comprender cómo se aborda la generación de SQL por parte de su proveedor puede ayudarlo a escribir consultas más eficientes.</p>
<p>Ahora que hemos revisado una consulta simple y cubierto la terminología básica, las siguientes secciones pasarán por cada una de las cláusulas de la consulta SELECT, explicando la sintaxis y las características disponibles.</p>
<p><strong>Nota:</strong> la función de transmisión de consultas incluida en Jakarta Persistence nos ayudará a evitar la recuperación de demasiados datos y provocar errores. Sin embargo, aún se recomienda y es más eficiente utilizar el método de paginación de Result Set.</p>
<h3 id="31-cláusula-select">3.1. Cláusula SELECT</h3>
<p>La cláusula SELECT de una consulta puede tener varias formas, incluyendo expresiones de ruta simples y complejas, expresiones escalares, expresiones de constructor, funciones agregadas y secuencias de estos tipos de expresiones. Las siguientes secciones introducen las expresiones de ruta y discuten los diferentes estilos de cláusulas SELECT y cómo determinan el tipo de resultado de la consulta. Dejamos la discusión de las expresiones escalares para explorar las expresiones condicionales en la cláusula WHERE. Están completamente descritas en la sección llamada &ldquo;Expresiones Escalares&rdquo;. Las funciones agregadas se detallan en el apartado &ldquo;Consultas Agregadas&rdquo;.</p>
<h4 id="311-expresiones-de-ruta">3.1.1. Expresiones de Ruta</h4>
<p>Se utilizan para <strong>navegar desde una entidad</strong>, ya sea <strong>a través de una relación hacia otra entidad (o colección de entidades) o hacia una de las propiedades persistentes de una entidad</strong>. La navegación que resulta en uno de los campos de estado persistentes (ya sea campo o propiedad) de una entidad se denomina ruta de campo de estado. La navegación que lleva a una sola entidad se llama ruta de asociación de un solo valor, mientras que la navegación hacia una colección de entidades se llama ruta de asociación de un valor de colección.</p>
<p>El operador de punto (.) significa navegación de ruta en una expresión. Por ejemplo, si la entidad Empleado se ha asignado a la variable de identificación e, e.nombre es una expresión de ruta de campo de estado que resuelve al nombre del empleado. De manera similar, la expresión de ruta e.departamento es una asociación de un solo valor desde el empleado hacia el departamento al que está asignado. Finalmente, e.directos es una asociación de un valor de colección que se resuelve en la colección de empleados que reportan a un empleado que también es un gerente.</p>
<p>Lo que hace que las expresiones de ruta sean tan poderosas es que no están limitadas a una sola navegación. En su lugar, las expresiones de navegación se pueden encadenar para recorrer grafos de entidades complejos siempre que la ruta se mueva de izquierda a derecha a través de asociaciones de un solo valor. Una ruta no puede continuar desde un campo de estado o una asociación de un valor de colección.</p>
<p>Usando esta técnica, podemos construir expresiones de ruta como e.departamento.nombre, que es el nombre del departamento al que pertenece el empleado. Tenga en cuenta que las expresiones de ruta pueden navegar hacia objetos incrustados y a través de ellos, así como a entidades normales. La única restricción en los objetos incrustados en una expresión de ruta es que la raíz de la expresión de ruta debe comenzar con una entidad.</p>
<p>Las expresiones de ruta se utilizan en cada cláusula de una consulta SELECT, determinando desde el tipo de resultado de la consulta hasta las condiciones bajo las cuales se deben filtrar los resultados. La experiencia con las expresiones de ruta es clave para escribir consultas efectivas.</p>
<h4 id="312-entidades-y-objetos">3.1.2. Entidades y Objetos</h4>
<p>La primera y más simple forma de la cláusula SELECT es una única variable de identificación. El tipo de resultado para una consulta de este estilo es la entidad a la que está asociada la variable de identificación. Por ejemplo, la siguiente consulta devuelve todos los departamentos en la empresa:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d</span></span></code></pre></div>
<p>La palabra <strong>clave <code>OBJECT</code> se puede utilizar para indicar que el tipo de resultado de la consulta es la entidad vinculada a la variable de identificación</strong>. No tiene impacto en la consulta, pero se puede usar como una <strong>pista visual</strong>:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">OBJECT</span>(d)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d</span></span></code></pre></div>
<p>El único problema de usar <code>OBJECT</code> es que, aunque las expresiones de ruta pueden resolverse a un tipo de entidad, la sintaxis de la palabra clave <code>OBJECT</code> está limitada a variables de identificación. La expresión <code>OBJECT(e.departamento)</code> es ilegal incluso si <code>Departamento</code> es un tipo de entidad. Por esa razón, <strong>no se recomienda la sintaxis de <code>OBJECT</code></strong>. Existe principalmente por compatibilidad con versiones anteriores del lenguaje que requerían la palabra clave <code>OBJECT</code> bajo el supuesto de que una revisión futura de SQL incluiría la misma terminología.</p>
<p>Una expresión de ruta que resuelve a un campo de estado o asociación de un solo valor también se puede utilizar en la cláusula SELECT. En este caso, el tipo de resultado de la consulta se convierte en el tipo de la expresión de ruta, ya sea el tipo de campo de estado o el tipo de entidad de una asociación de un solo valor. La siguiente consulta devuelve los nombres de todos los empleados:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e.nombre
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e</span></span></code></pre></div>
<p>El tipo de resultado de la expresión de ruta en la cláusula SELECT es <code>String</code>, por lo que ejecutar esta consulta con <code>getResultList()</code> producirá una colección de cero o más objetos <code>String</code>.</p>
<p>Las expresiones de ruta que resuelven en campos de estado también se pueden usar como parte de expresiones escalares, lo que permite transformar el campo de estado en los resultados de la consulta. Discutiremos esta técnica más adelante en la sección llamada &ldquo;Expresiones Escalares&rdquo;.</p>
<p>Las entidades alcanzadas desde una expresión de ruta también se pueden devolver. La siguiente consulta demuestra devolver una entidad diferente como resultado de la navegación de la ruta:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e.departamento
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e</span></span></code></pre></div>
<p>El tipo de resultado de esta consulta es la entidad <code>Departamento</code> porque es el resultado de atravesar la relación del departamento desde <code>Empleado</code> hasta <code>Departamento</code>. Ejecutar la consulta, por lo tanto, dará como resultado una colección de cero o más objetos <code>Departamento</code>, incluidos duplicados.</p>
<p>Para eliminar los duplicados, se debe utilizar el operador <code>DISTINCT</code>:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">DISTINCT</span> e.departamento
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e</span></span></code></pre></div>
<p>El <strong>operador <code>DISTINCT</code> es funcionalmente equivalente al operador del mismo nombre en SQL</strong>. Una vez que se recopila el conjunto de resultados, se eliminan los valores duplicados (usando la identidad de la entidad si el tipo de resultado de la consulta es una entidad), de modo que solo se devuelven resultados únicos.</p>
<p>El tipo de resultado de una consulta SELECT es el tipo correspondiente a cada fila en el conjunto de resultados producido al ejecutar la consulta. Esto puede incluir entidades, tipos primitivos y otros tipos de atributos persistentes, pero nunca un tipo de colección. La siguiente consulta es ilegal:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> d.empleados
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d</span></span></code></pre></div>
<p>La expresión de ruta <code>d.empleados</code> es una ruta de valor de colección que produce un tipo de colección. Restringir las consultas de esta manera evita que el proveedor tenga que combinar filas sucesivas de la base de datos en un solo objeto de resultado.</p>
<p>Es posible seleccionar objetos incrustables navegados en una expresión de ruta. La siguiente consulta devuelve solo los objetos incrustables <code>InformacionContacto</code> para todos los empleados:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e.informacionContacto
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e</span></span></code></pre></div>
<p>Lo importante de recordar al seleccionar objetos incrustables es que los objetos devueltos no estarán gestionados. Si emites una consulta para devolver empleados (<code>SELECT e FROM Empleado e</code>) y luego, desde los resultados, navegas a sus objetos incrustados <code>InformacionContacto</code>, estarías obteniendo objetos incrustables que estaban gestionados. Los cambios en cualquiera de esos objetos se guardarían cuando se confirmara la transacción. Sin embargo, cambiar cualquiera de los resultados de objetos <code>InformacionContacto</code> devueltos de una consulta que seleccionó directamente <code>InformacionContacto</code>, no tendría ningún efecto persistente.</p>
<h4 id="313-combinación-de-expresiones">3.1.3 Combinación de Expresiones</h4>
<p>Se pueden especificar múltiples expresiones en la misma cláusula SELECT separándolas con comas. El tipo de resultado de la consulta en este caso es un array de tipo Object, donde los elementos del array son los resultados de resolver las expresiones en el orden en que aparecieron en la consulta.</p>
<p>Considera la siguiente consulta que devuelve solo el nombre y salario de un empleado:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e.nombre, e.salario
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e</span></span></code></pre></div>
<p>Cuando se ejecuta esto, se devolverá una colección de cero o más instancias de arrays de tipo Object. Cada array en este ejemplo tiene dos elementos, el primero es un String que contiene el nombre del empleado y el segundo es un Double que contiene el salario del empleado. La práctica de informar solo un subconjunto de los campos de estado de una entidad se llama proyección porque los datos de la entidad se proyectan desde la entidad en forma tabular. La proyección es una técnica útil para aplicaciones web en las que solo se muestran unos pocos datos de un gran conjunto de instancias de entidades. Dependiendo de cómo se haya mapeado la entidad, podría requerir una consulta SQL compleja para recuperar completamente el estado de la entidad. Si solo se requieren dos campos, el esfuerzo adicional invertido en la construcción de la instancia de entidad podría haber sido desperdiciado. Una consulta de proyección que devuelve solo la cantidad mínima de datos es más útil en estos casos.</p>
<h4 id="314-constructor-de-expresiones">3.1.4 Constructor de expresiones</h4>
<p><strong>Una forma más potente de la cláusula SELECT</strong> que implica múltiples expresiones es la <strong>expresión de construcción (NEW)</strong>, que especifica que los resultados de la consulta se deben almacenar utilizando un tipo de objeto especificado por el usuario. Considera la siguiente consulta:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">NEW</span> ejemplo.DetalleEmpleado(e.nombre, e.salario, e.departamento.nombre)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e</span></span></code></pre></div>
<p>El tipo de resultado de esta consulta es la clase Java <code>ejemplo.DetalleEmpleado</code>. A medida que el procesador de consultas itera sobre los resultados de la consulta, <strong>se crean instancias de <code>DetalleEmpleado</code> utilizando el constructor que coincide con los tipos de expresión enumerados en la consulta</strong>. En este caso, los tipos de expresión son <code>String</code>, <code>Double</code> y <code>String</code>. Cada fila en la colección de consulta resultante es una instancia de <code>DetalleEmpleado</code> que contiene el nombre del empleado, el salario y el nombre del departamento.</p>
<p>El tipo de objeto de resultado <strong>debe referirse utilizando el nombre completo del objeto</strong>. Sin embargo, <strong>la clase no tiene que estar mapeada en la base de datos de ninguna manera</strong>. Cualquier clase con un constructor compatible con las expresiones enumeradas en la cláusula SELECT se puede usar en una expresión de constructor.</p>
<p>Las expresiones de constructor son herramientas poderosas <strong>para construir objetos de transferencia de datos o de vista de grano grueso para su uso en otros niveles de la aplicación</strong>. En lugar de construir manualmente estos objetos, se puede usar una sola consulta para reunir objetos de vista listos para su presentación en una página web.</p>
<h3 id="32-cláusula-from">3.2. Cláusula FROM</h3>
<p>La cláusula FROM se utiliza para declarar una o más variables de identificación, opcionalmente derivadas de relaciones unidas, que forman el dominio sobre el cual la consulta debería extraer sus resultados. La sintaxis de la cláusula FROM consiste en una o más variables de identificación y declaraciones de cláusulas JOIN.</p>
<h4 id="321-variables-de-identificación">3.2.1 Variables de Identificación</h4>
<p>La variable de identificación es el punto de partida para todas las expresiones de consulta. Cada consulta <strong>debe tener al menos una variable de identificación definida en la cláusula <code>FROM</code></strong>, y esa variable <strong>debe corresponder a un tipo de entidad</strong>. Cuando una declaración de variable de identificación no utiliza una expresión de ruta (es decir, cuando es un solo nombre de entidad), se denomina declaración de variable de rango. Esta terminología proviene de la teoría de conjuntos, ya que se dice que la variable abarca la entidad.</p>
<p>Las declaraciones de variables de rango utilizan la <strong>sintaxis <code>&lt;nombre_entidad&gt; [AS] &lt;identificador&gt;</code></strong>.</p>
<p>La <strong>palabra clave <code>AS</code> opcional</strong>. El identificador debe seguir las reglas de nomenclatura estándar de Java y se puede referenciar en toda la consulta de manera <strong>insensible a mayúsculas y minúsculas</strong>. Se pueden especificar múltiples declaraciones separándolas con comas.</p>
<p>Las <strong>expresiones de ruta también pueden tener un alias con las variables de identificación en el caso de uniones y subconsultas</strong>. La sintaxis para las declaraciones de variables de identificación en estos casos se cubrirá en las dos secciones siguientes.</p>
<h3 id="322-joins">3.2.2. Joins</h3>
<p>Una operación de unión (join) es una consulta que combina resultados de varias entidades. <strong>Los Joins en Jakarta Persistence QL son lógicamente equivalentes a los de SQL</strong>. En última instancia, una vez que la consulta se traduce a SQL, es muy probable que las uniones entre entidades produzcan uniones similares entre las tablas a las que están mapeadas las entidades. Comprender cuándo ocurren las uniones es importante para escribir consultas eficientes.</p>
<p>Las uniones ocurren <strong>siempre que se cumplen cualquiera de las siguientes condiciones en una consulta SELECT</strong>:</p>
<ul>
<li>Se <strong>enumeran dos o más declaraciones de variables de rango en la cláusula FROM y aparecen en la cláusula SELECT</strong>.</li>
<li>Se <strong>utiliza el operador <code>JOIN</code></strong> para extender una variable de identificación mediante una expresión de ruta.</li>
<li>Una expresión de ruta en cualquier lugar de la consulta navega a través de un campo de asociación, ya sea a la misma entidad o a una entidad diferente.</li>
<li><strong>Una o más condiciones WHERE comparan atributos de diferentes variables de identificación</strong>.</li>
</ul>
<p>La semántica de una unión entre entidades es la misma que las uniones SQL entre tablas. La mayoría de las consultas contienen una serie de condiciones de unión, que son expresiones que definen las reglas para emparejar una entidad con otra.</p>
<p>Las condiciones de unión <strong>se pueden especificar explícitamente, como el uso del operador JOIN en la cláusula FROM de una consulta, o implícitamente como resultado de la navegación de la ruta</strong>.</p>
<p><strong>Una <code>Inner Join</code> entre dos entidades devuelve los objetos de ambos tipos de entidad que satisfacen todas las condiciones de unión</strong>. La navegación de la ruta de una entidad a otra es una forma de unión interna.</p>
<p><strong>La <code>Outer Join</code> de dos entidades es el conjunto de objetos de ambos tipos de entidad</strong> que s<strong>atisfacen las condiciones</strong> de unión, <strong>más</strong> el conjunto de objetos de un tipo de entidad (designado como la entidad izquierda) <strong>que no tienen una condición de unión coincidente en el otro</strong>.</p>
<p>En <strong>ausencia de condiciones de unión entre dos entidades, las consultas producirán un producto cartesiano</strong>. Cada objeto del primer tipo de entidad se emparejará con cada objeto del segundo tipo de entidad, multiplicando el número de resultados. Los productos cartesianos son raros en las consultas de Jakarta Persistence QL dadas las capacidades de navegación del lenguaje, pero son posibles si se especifican dos declaraciones de variables de rango en la cláusula FROM sin condiciones adicionales especificadas en la cláusula WHERE.</p>
<h4 id="a-inner-join">A. Inner Join</h4>
<p>Como lenguaje relacional, <strong>Jakarta Persistence QL admite consultas que se basan en múltiples entidades y las relaciones entre ellas</strong>.</p>
<p>Las <strong>uniones internas entre dos entidades se pueden especificar</strong> de dos formas:</p>
<ul>
<li>La primera y preferida forma, porque es explícita y obvia que se está produciendo una unión, <strong>es el operador JOIN en la cláusula FROM</strong>.</li>
<li>Otra forma <strong>requiere múltiples declaraciones de variables de rango en la cláusula FROM y condiciones de la cláusula WHERE</strong> para proporcionar las condiciones de la unión.</li>
</ul>
<h5 id="a1-operador-join-y-campos-de-asociación-de-colección-one-to-many-y-many-to-many">A.1. Operador JOIN y campos de asociación de colección (one-to-many y many-to-many)</h5>
<p>La <strong>sintaxis de una unión interna mediante el operador JOIN es <code>[INNER] JOIN &lt;expresión_de_ruta&gt; [AS] &lt;identificador&gt;</code></strong>. Considera la siguiente consulta:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">JOIN</span> e.telefonos p</span></span></code></pre></div>
<p>Esta consulta utiliza el operador JOIN para unir la entidad <code>Empleado</code> con la entidad <code>Telefono</code> a través de la relación <code>telefonos</code>. La condición de unión en esta consulta está definida por el mapeo objeto-relacional de la relación <code>telefonos</code>. <strong>No es necesario especificar criterios adicionales para vincular las dos entidades</strong>. Al unir las dos entidades, esta consulta devuelve todas las instancias de la entidad Telefono asociadas a los empleados de la empresa.</p>
<p>La <strong>sintaxis para las uniones es similar a las expresiones JOIN admitidas por ANSI SQL</strong>. Otra forma equivalente en SQL escrita utilizando la forma de <strong>join tradicional</strong>:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> p.id, p.numeroTelefono, p.tipo, p.idEmpleado
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> emp e, telefono p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> e.id <span style="color:#f92672">=</span> p.idEmpleado</span></span></code></pre></div>
<p>El mapeo de la tabla para la entidad <code>Telefono</code> reemplaza la expresión <code>e.telefonos</code>. La cláusula WHERE también incluye los criterios necesarios para unir las dos tablas a través de las columnas de unión definidas por el mapeo de telefonos.</p>
<p>Ten en cuenta que la relación <code>telefonos</code> se ha asignado a la variable de identificación p. Aunque la entidad <code>Telefono</code> no aparece directamente en la consulta, el objetivo de la relación telefonos es la entidad Telefono, y esto determina el tipo de la variable de identificación. Esta determinación implícita del tipo de variable de identificación puede llevar algo de tiempo acostumbrarse. Es necesario estar familiarizado con cómo se definen las relaciones en el modelo de objetos para navegar a través de una consulta escrita.</p>
<p>Cada ocurrencia de <code>p</code> fuera de la cláusula FROM ahora se refiere a un solo teléfono propiedad de un empleado. Aunque se especificó un campo de asociación de colección en la cláusula JOIN, la variable de identificación realmente se refiere a entidades alcanzadas por esa asociación, no a la colección en sí. Ahora se puede usar la variable como si la entidad Telefono estuviera listada directamente en la cláusula FROM. Por ejemplo, en lugar de devolver instancias de la entidad <code>Telefono</code>, se pueden devolver solo los números de teléfono:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> p.numero
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">JOIN</span> e.telefonos p</span></span></code></pre></div>
<p>En la definición de expresiones de ruta anterior, se señaló que una ruta no podía continuar desde un campo de estado o un campo de asociación de colección. Para resolver esta situación, el campo de asociación de colección debe unirse en la cláusula FROM para que se cree una nueva variable de identificación para la ruta, lo que permite que sea la raíz de nuevas expresiones de ruta.</p>

<details open class=" box cstyle notices note">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-exclamation-circle"></i> 
    IN VS. JOIN
  </summary>
  <div class="box-content">
<p><strong>EJB QL</strong>, según lo definido por las especificaciones de EJB, <strong>utilizaba un operador especial llamado IN en la cláusula FROM</strong> para mapear asociaciones de colecciones a variables de identificación. El soporte para este operador se trasladó a Jakarta Persistence QL. La forma equivalente de la consulta utilizada anteriormente en esta sección podría especificarse como:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">DISTINCT</span> p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e, <span style="color:#66d9ef">IN</span>(e.telefonos) p</span></span></code></pre></div>
<p>El operador IN tiene la intención de indicar que la variable p es una enumeración de la colección telefonos. Sin embargo, el operador JOIN es una forma más potente y expresiva de declarar relaciones y es el operador recomendado para consultas.</p>
  </div>
</details>
<h5 id="a2-operador-join-y-campos-de-asociación-de-un-solo-valor-one-to-one-y-many-to-one">A.2. Operador JOIN y campos de asociación de un solo valor (one-to-one y many-to-one)</h5>
<p>El operador JOIN funciona tanto con expresiones de ruta de asociación de valor de colección como con expresiones de ruta de asociación de valor único. Considera el siguiente ejemplo:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">JOIN</span> e.departamento d</span></span></code></pre></div>
<p>Esta consulta define un join desde Empleado hasta Departamento a través de la relación departamento. Esto es semánticamente equivalente a usar una expresión de ruta en la cláusula SELECT para obtener el departamento del empleado. Por ejemplo, la siguiente consulta debería resultar en representaciones SQL similares, si no idénticas, que involucren un join entre las entidades Empleado y Departamento:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e.departamento
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e</span></span></code></pre></div>
<p>El caso de <strong>uso principal</strong> para usar una expresión de ruta de asociación de valor único en la cláusula FROM (en lugar de solo usar una expresión de ruta en la cláusula SELECT) es <strong>para joins externos</strong>. La navegación de la ruta es equivalente al inner join de todas las entidades asociadas atravesadas en la expresión de ruta.</p>
<p>La posibilidad de joins internos implícitos resultantes de expresiones de ruta es algo a tener en cuenta. Considera el siguiente ejemplo que devuelve los departamentos distintos basados en California que participan en el proyecto Versión1:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">DISTINCT</span> e.departamento
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Proyecto p <span style="color:#66d9ef">JOIN</span> p.empleados e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> p.nombre <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Versión1&#39;</span> <span style="color:#66d9ef">AND</span>
</span></span><span style="display:flex;"><span>e.direccion.provincia <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;PO&#39;</span></span></span></code></pre></div>
<p>En realidad, hay cuatro joins lógicos aquí, no dos. El traductor tratará la consulta como si se hubiera escrito con joins explícitos entre las diversas entidades. Cubriremos la sintaxis para múltiples joins más adelante en la sección &ldquo;Múltiples Joins&rdquo;, pero por ahora considera la siguiente consulta que es equivalente a la consulta anterior, leyendo las condiciones de join de izquierda a derecha:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">DISTINCT</span> d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Proyecto p <span style="color:#66d9ef">JOIN</span> p.empleados e <span style="color:#66d9ef">JOIN</span> e.departamento d <span style="color:#66d9ef">JOIN</span> e.direccion a
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> p.nombre <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Versión1&#39;</span> <span style="color:#66d9ef">AND</span>
</span></span><span style="display:flex;"><span>a.provincia <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;PO&#39;</span></span></span></code></pre></div>
<p>Decimos cuatro joins lógicos porque el mapeo físico real podría involucrar más tablas. En este caso, las entidades Empleado y Proyecto están relacionadas a través de una asociación many-to-many que utiliza una tabla de join. Por lo tanto, el SQL real para tal consulta usa cinco tablas, no cuatro. La consulta se vería así:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">DISTINCT</span> d.id, d.nombre
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> project p, proyectosEmpleado ep, emp e, dept d, direccion a
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> p.id <span style="color:#f92672">=</span> ep.idProyecto <span style="color:#66d9ef">AND</span>
</span></span><span style="display:flex;"><span>ep.idEmpleado <span style="color:#f92672">=</span> e.id <span style="color:#66d9ef">AND</span>
</span></span><span style="display:flex;"><span>e.idDepartamento <span style="color:#f92672">=</span> d.id <span style="color:#66d9ef">AND</span>
</span></span><span style="display:flex;"><span>e.idDireccion <span style="color:#f92672">=</span> a.id <span style="color:#66d9ef">AND</span>
</span></span><span style="display:flex;"><span>p.nombre <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Versión1&#39;</span> <span style="color:#66d9ef">AND</span>
</span></span><span style="display:flex;"><span>a.provincia <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;PO&#39;</span></span></span></code></pre></div>
<p>La primera forma de la consulta ciertamente es más fácil de leer y entender. Sin embargo, durante la optimización del rendimiento, podría ser útil comprender cuántos joins pueden ocurrir como resultado de expresiones de ruta aparentemente triviales.</p>
<h5 id="a3-condiciones-de-join-en-la-cláusula-where">A.3. Condiciones de Join en la Cláusula WHERE</h5>
<p>Las consultas SQL tradicionalmente han unido tablas enumerando las tablas a unir en la cláusula FROM y proporcionando criterios en la cláusula WHERE de la consulta para determinar las condiciones de join. Para unir dos entidades sin usar una relación, se utiliza una declaración de variable de rango para cada entidad en la cláusula FROM.</p>
<p>El ejemplo de join anterior entre las entidades Empleado y Departamento también podría haberse escrito de la siguiente manera:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">DISTINCT</span> d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d, Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> d <span style="color:#f92672">=</span> e.departamento</span></span></code></pre></div>
<p>Este estilo de consulta se utiliza generalmente para compensar la falta de una relación explícita entre dos entidades en el modelo de dominio. Por ejemplo, no hay una asociación entre la entidad Departamento y el Empleado que es el gerente del departamento.</p>
<p>Podemos usar una condición de join en la cláusula WHERE para hacer esto posible:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> d, m
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d, Empleado m
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> d <span style="color:#f92672">=</span> m.departamento <span style="color:#66d9ef">AND</span>
</span></span><span style="display:flex;"><span>m.directos <span style="color:#66d9ef">IS</span> <span style="color:#66d9ef">NOT</span> EMPTY</span></span></code></pre></div>
<p>En este ejemplo, estamos utilizando una de las expresiones de colección especiales, IS NOT EMPTY, para verificar que la colección de informes directos al empleado no está vacía. Cualquier empleado con una colección no vacía de informes directos es, por definición, un gerente.</p>
<h5 id="a4-múltiples-joins">A.4. Múltiples Joins</h5>
<p>Más de un join se puede concatenar si es necesario. Por ejemplo, la siguiente consulta devuelve el conjunto distinto de proyectos pertenecientes a empleados que pertenecen a un departamento:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">DISTINCT</span> p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d <span style="color:#66d9ef">JOIN</span> d.empleados e <span style="color:#66d9ef">JOIN</span> e.proyectos p</span></span></code></pre></div>
<p>El procesador de consultas interpreta la cláusula FROM de izquierda a derecha. Una vez que se ha declarado una variable, puede ser referenciada posteriormente por otras expresiones JOIN. En este caso, la relación proyectos de la entidad Empleado se navega una vez que se ha declarado la variable empleado.</p>
<h5 id="a5-joins-con-mapas-value-key-y-entry">A.5. Joins con Mapas: <code>VALUE</code>, <code>KEY</code> y <code>ENTRY</code></h5>
<p>Una expresión de ruta que navega a través de una asociación de valor de <strong>colección implementada como un <code>Map</code> es un caso especial</strong>. A diferencia de una colección normal, <strong>cada elemento en un mapa corresponde a dos piezas de información: la clave y el valor</strong>.</p>
<p>Al trabajar con Jakarta Persistence QL, es importante tener en cuenta que, <strong>por defecto, las variables de identificación basadas en mapas se refieren al valor</strong>. Por ejemplo, considera el caso en el que la relación telefonos de la entidad Empleado se modela como un mapa, donde la clave es el tipo de número (trabajo, celular, casa, etc.) y el valor es el número de teléfono. La siguiente consulta enumera los números de teléfono de todos los empleados:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e.nombre, p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">JOIN</span> e.telefonos p</span></span></code></pre></div>
<p>Este comportamiento se puede <strong>resaltar explícitamente mediante el uso de la palabra clave <code>VALUE</code></strong>. Por ejemplo, la consulta anterior es funcionalmente idéntica a la siguiente:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e.nombre, VALUE(p)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">JOIN</span> e.telefonos p</span></span></code></pre></div>
<p><strong>Para acceder a la clave en lugar del valor</strong> para un elemento de mapa dado, <strong>podemos usar la palabra clave <code>KEY</code></strong> para anular el comportamiento predeterminado y devolver el valor de la clave para un elemento de mapa dado:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e.nombre, <span style="color:#66d9ef">KEY</span>(p), VALUE(p)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">JOIN</span> e.telefonos p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">KEY</span>(p) <span style="color:#66d9ef">IN</span> (<span style="color:#e6db74">&#39;Trabajo&#39;</span>, <span style="color:#e6db74">&#39;Móvil&#39;</span>)</span></span></code></pre></div>
<p>Finalmente, en caso de que queramos que <strong>tanto la clave como el valor se devuelvan juntos en forma de un objeto <code>java.util.Map.Entry</code></strong>, <strong>podemos especificar la palabra clave <code>ENTRY</code> de la misma manera</strong>. Ten en cuenta que la palabra clave ENTRY <strong>solo se puede usar en la cláusula SELECT</strong>. Las palabras clave KEY y VALUE también se pueden usar como parte de expresiones condicionales en las cláusulas WHERE y HAVING de la consulta.</p>
<p>Es importante señalar que en cada uno de los ejemplos de unión de mapas, unimos una entidad contra uno de sus atributos de Mapa y obtenemos una clave, un valor o un par clave-valor (entrada). Sin embargo, cuando se ve desde la perspectiva de las tablas, la unión se realiza solo a nivel de la clave principal de la entidad de origen y los valores en el Mapa. Actualmente, no hay una facilidad disponible en Jakarta Persistence para unir la entidad de origen contra las claves del Mapa.</p>
<h4 id="b-outer-joins">B. Outer Joins</h4>
<p>Un outer join entre dos entidades produce un dominio en el cual <strong>solo se requiere que un lado de la relación esté completo</strong>.</p>
<p>En otras palabras, el join externo de <code>Empleado</code> a <code>Departamento</code> a través de la relación de departamento de empleado devuelve todos los empleados y el departamento al cual se le ha asignado el empleado, pero el departamento se devuelve solo si está disponible. Esto contrasta con un inner join que devolvería solo aquellos empleados asignados a un departamento.</p>
<p>Un <strong>join externo se especifica utilizando la siguiente sintaxis: <code>LEFT [OUTER] JOIN &lt;path_expression&gt; [AS] &lt;identifier&gt;</code></strong>. La siguiente consulta demuestra un join externo entre dos entidades:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e, d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> e.departamento d</span></span></code></pre></div>
<p>Si el empleado no ha sido asignado a un departamento, el objeto de departamento (el segundo elemento del array de Object) será nulo.</p>
<p>En una generación SQL típica del proveedor, verás que la consulta anterior sería equivalente a la siguiente:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e.id, e.nombre, e.salario, e.idGestor, e.idDepartamento, e.idDireccion,
</span></span><span style="display:flex;"><span>d.id, d.nombre
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> empleado e <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">OUTER</span> <span style="color:#66d9ef">JOIN</span> departamento d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ON</span> (d.id <span style="color:#f92672">=</span> e.idDepartamento)</span></span></code></pre></div>
<p>El SQL resultante muestra que cuando se genera un join externo desde Jakarta Persistence QL, siempre especifica una condición <code>ON</code> de igualdad entre la columna de join que mapea la relación que se está uniendo y la clave primaria a la que se está haciendo referencia.</p>
<p>Se puede suministrar una expresión ON adicional para agregar restricciones a los objetos que se devuelven desde el lado derecho del join. Por ejemplo, podemos modificar la consulta Jakarta Persistence QL anterior para tener una condición ON adicional que limite los departamentos devueltos solo a aquellos que tienen un prefijo &lsquo;QA&rsquo;:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e, d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> e.departamento d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ON</span> d.nombre <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;De%&#39;</span></span></span></code></pre></div>
<p>Esta consulta sigue devolviendo todos los empleados, pero los resultados no incluirán ningún departamento que no coincida con la condición ON agregada. El SQL generado se vería así:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e.id, e.nombre, e.salario, e.idDepartamento, e.idGestor, e.idDireccion,
</span></span><span style="display:flex;"><span>d.id, d.nombre
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> empleado e <span style="color:#66d9ef">left</span> <span style="color:#66d9ef">outer</span> <span style="color:#66d9ef">join</span> departamento d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ON</span> ((d.id <span style="color:#f92672">=</span> e.idDepartamento) <span style="color:#66d9ef">and</span> (d.nombre <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;De%&#39;</span>))</span></span></code></pre></div>
<p>Es importante señalar que esta consulta es muy diferente de usar una expresión WHERE:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e, d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> e.departamento d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> d.nombre <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;De%&#39;</span></span></span></code></pre></div>
<p>La expresión WHERE limitará los resultados después de realizar el join, lo que puede resultar en un comportamiento diferente:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e, d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> e.departamento d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> d.nombre <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;De%&#39;</span></span></span></code></pre></div>
<p>La cláusula WHERE resulta en una semántica de inner join entre Empleado y Departamento, por lo que esta consulta solo devolvería los empleados que estuvieran en un departamento con un nombre que comience con &lsquo;QA&rsquo;.</p>
<h4 id="c-fetch-joins">C. Fetch Joins</h4>
<p>Los <strong>fetch joins están destinados a ayudar</strong> a los diseñadores de aplicaciones a <strong>optimizar el acceso a su base de datos y preparar los resultados de la consulta para su desprendimiento</strong>. Permiten que las consultas especifiquen una o más relaciones que deben ser <strong>navegadas y pre-cargadas por el motor de consulta para que no se carguen de forma diferida más tarde en tiempo de ejecución</strong>.</p>
<p>Por ejemplo, si tenemos una entidad Empleado con una relación de carga diferida con su dirección, la siguiente consulta se puede utilizar para indicar que <strong>la relación debe resolverse de forma inmediata durante la ejecución de la consulta</strong>:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">JOIN</span> <span style="color:#66d9ef">FETCH</span> e.direccion</span></span></code></pre></div>
<p>No se establece una variable de identificación para la expresión de ruta <code>e.direccion</code>. Esto se debe a que aunque <strong>la entidad <code>Direccion</code> se está uniendo para resolver la relación, no es parte del tipo de resultado de la consulta</strong>. El resultado de ejecutar la consulta sigue siendo una colección de instancias de la entidad Empleado, excepto que <strong>la relación de dirección en cada entidad no causará una consulta secundaria a la base de datos cuando se acceda a ella</strong>. Esto también permite que la relación de dirección se acceda de forma segura si la entidad Empleado se vuelve desprendida.</p>
<p><strong>Un fetch join se distingue de un join regular al agregar la palabra <code>FETCH</code> al operador <code>JOIN</code></strong>.</p>
<p>Para implementar fetch joins, el <strong>proveedor necesita convertir la asociación recuperada en un join regular del tipo apropiado</strong>: interno por defecto o externo si se especificó la palabra LEFT. La expresión SELECT de la consulta también necesita expandirse para incluir la relación unida. Expresado en Jakarta Persistence QL, una interpretación equivalente del proveedor del ejemplo anterior de fetch join se vería así:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e, a
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">JOIN</span> e.direccion a</span></span></code></pre></div>
<p>La única diferencia es que <strong>el proveedor en realidad no devuelve las entidades Direccion al llamante</strong>. Debido a que los resultados se procesan desde esta consulta, el motor de consultas crea la entidad <code>Direccion</code> en la memoria y la asigna a la entidad Empleado, pero luego la elimina de la colección de resultados que construye para el cliente. Esto carga de forma anticipada la relación de direcciones, que luego se puede acceder mediante la navegación desde la entidad Empleado.</p>
<p>Una consecuencia de implementar fetch joins de esta manera es que la obtención de una colección asociativa produce resultados duplicados. Por ejemplo, considere una consulta de departamento donde la relación empleados de la entidad Departamento se obtiene de manera anticipada. La consulta de fetch join, esta vez utilizando un outer join para asegurar que se recuperen los departamentos sin empleados, se escribiría de la siguiente manera:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> <span style="color:#66d9ef">FETCH</span> d.empleados</span></span></code></pre></div>
<p>Expresado en Jakarta Persistence QL, la interpretación del proveedor reemplazaría el fetch con un outer join a través de la relación <code>empleados</code>:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> d, e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> d.empleados e</span></span></code></pre></div>
<p>Nuevamente, a medida que se procesan los resultados, la entidad Empleado se construye en la memoria pero se elimina de la colección de resultados. Cada entidad Departamento ahora tiene una colección de empleados completamente resuelta, pero el cliente recibe una referencia a cada departamento por empleado. Por ejemplo, si se recuperaron cuatro departamentos con cinco empleados cada uno, el resultado sería una colección de 20 instancias de Departamento, con cada departamento duplicado cinco veces. Las instancias reales de las entidades apuntan todas a las mismas versiones administradas, pero los resultados son algo extraños, como mínimo.</p>
<p>Para eliminar los valores duplicados, se debe usar el operador DISTINCT o los resultados deben colocarse en una estructura de datos como un Set. Dado que no es posible escribir una consulta SQL que use el operador DISTINCT y al mismo tiempo preserve la semántica del fetch join, el proveedor deberá eliminar duplicados en la memoria después de que se hayan recuperado los resultados. Esto podría tener implicaciones de rendimiento para conjuntos de resultados grandes.</p>
<p>Dadas los resultados algo peculiares generados por un fetch join a una colección, puede que no sea la forma más apropiada de cargar de forma anticipada entidades relacionadas en todos los casos. Si una colección requiere una carga anticipada de manera regular, <strong>considera hacer que la relación sea ansiosa por defecto</strong>. Algunos proveedores de persistencia también ofrecen lecturas por lotes como alternativa a los fetch joins, emitiendo múltiples consultas en un solo lote y luego correlacionando los resultados para cargar de forma anticipada las relaciones. Otra alternativa es utilizar un gráfico de entidades para determinar dinámicamente los atributos de relación que se cargarán mediante una consulta.</p>
<h3 id="33-clausula-where">3.3. Clausula WHERE</h3>
<p>La cláusula WHERE de una consulta se utiliza para especificar condiciones de filtrado para reducir el conjunto de resultados. En esta sección, exploramos las características de la cláusula WHERE y los tipos de expresiones que se pueden formar para filtrar los resultados de la consulta.</p>
<p>La definición de la cláusula WHERE es engañosamente simple. Es simplemente la palabra clave WHERE, seguida de una expresión condicional. Sin embargo, como demuestran las siguientes secciones, Jakarta Persistence QL admite un conjunto poderoso de expresiones condicionales para filtrar las consultas más sofisticadas.</p>
<h4 id="parámetros-de-entrada">Parámetros de entrada</h4>
<p>Los parámetros de entrada para las consultas se pueden especificar utilizando notación posicional o con nombre. La notación posicional se define prefijando el número de variable con un signo de interrogación. Considere la siguiente consulta:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> e.salario <span style="color:#f92672">&gt;</span> <span style="color:#f92672">?</span><span style="color:#ae81ff">1</span></span></span></code></pre></div>
<p>Utilizando la interfaz Query, cualquier valor double o un valor compatible con el tipo del atributo salario se puede vincular al primer parámetro para indicar el límite inferior para los salarios de los empleados en esta consulta. El mismo parámetro posicional puede ocurrir más de una vez en la consulta. El valor vinculado al parámetro se sustituirá en cada una de sus ocurrencias.</p>
<p>Los parámetros con nombre se especifican utilizando dos puntos seguidos de un identificador. Aquí está la misma consulta, esta vez usando un parámetro con nombre:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> e.salario <span style="color:#f92672">&gt;</span> :sal</span></span></code></pre></div>
<h4 id="forma-básica-de-expresión">Forma Básica de Expresión</h4>
<p>Gran parte del soporte para expresiones condicionales en Jakarta Persistence QL se toma directamente de SQL. Esto es intencional y ayuda a facilitar la transición para los desarrolladores que ya están familiarizados con SQL. La principal diferencia entre las expresiones condicionales en Jakarta Persistence QL y SQL es que las expresiones en Jakarta Persistence QL pueden aprovechar las variables de identificación y las expresiones de ruta para navegar por las relaciones durante la evaluación de la expresión.</p>
<p>Las expresiones condicionales se construyen de la misma manera que las expresiones condicionales en SQL, utilizando una combinación de operadores lógicos, expresiones de comparación, operaciones primitivas y funciones en campos, entre otros. Aunque se proporciona un resumen de los operadores más adelante, la gramática de las expresiones condicionales no se repite aquí. La especificación de Jakarta Persistence contiene la gramática en la forma de Backus-Naur (BNF) y es el lugar donde buscar las reglas exactas sobre el uso de las expresiones básicas. Sin embargo, las secciones siguientes explican los operadores y expresiones de nivel superior, especialmente aquellos únicos de Jakarta Persistence QL, y proporcionan ejemplos para cada uno.</p>
<p>La sintaxis literal también es similar a SQL (consulte la sección &ldquo;Literales&rdquo;).</p>
<p>La precedencia de operadores es la siguiente:</p>
<ol>
<li>Operador de navegación (.)</li>
<li>Unary +/–</li>
<li>Multiplicación (*) y división (/)</li>
<li>Adición (+) y sustracción (–)</li>
<li>Operadores de comparación =, &gt;, &gt;=, &lt;, &lt;=, &lt;&gt;, [NOT] BETWEEN, [NOT] LIKE, [NOT] IN, IS [NOT] NULL, IS [NOT] EMPTY, [NOT] MEMBER [OF]</li>
<li>Operadores lógicos (AND, OR, NOT)</li>
</ol>
<h4 id="expresiones-between">Expresiones BETWEEN</h4>
<p>El operador BETWEEN se puede usar en expresiones condicionales para determinar si el resultado de una expresión cae dentro de un rango inclusivo de valores. Las expresiones numéricas, de cadena y de fecha se pueden evaluar de esta manera. Considere el siguiente ejemplo:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> e.salario <span style="color:#66d9ef">BETWEEN</span> <span style="color:#ae81ff">40000</span> <span style="color:#66d9ef">AND</span> <span style="color:#ae81ff">45000</span></span></span></code></pre></div>
<p>Cualquier empleado que gane $40,000–$45,000 inclusivamente se incluirá en los resultados. Esto es idéntico a la siguiente consulta que utiliza operadores de comparación básicos:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> e.salario <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">40000</span> <span style="color:#66d9ef">AND</span> e.salario <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">45000</span></span></span></code></pre></div>
<p>El operador BETWEEN también se puede negar con el operador NOT.</p>
<h4 id="expresiones-like">Expresiones LIKE</h4>
<p>Jakarta Persistence QL admite la condición LIKE de SQL para proporcionar una forma limitada de coincidencia de patrones de cadena. Cada expresión LIKE consta de una expresión de cadena a buscar y una cadena de patrón y una secuencia de escape opcional que define las condiciones de coincidencia. Los caracteres comodín utilizados por la cadena de patrón son el guion bajo (_) para comodines de un solo carácter y el signo de porcentaje (%) para comodines de varios caracteres:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> d.nombre <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;__Eng%&#39;</span></span></span></code></pre></div>
<p>Estamos utilizando un prefijo de dos guiones bajos para comodinar los primeros dos caracteres de los candidatos de cadena, por lo que los nombres de departamento de ejemplo que coincidirían con esta consulta serían CAEngOtt o USEngCal, pero no CADocOtt. Tenga en cuenta que las coincidencias de patrones distinguen entre mayúsculas y minúsculas.</p>
<p>Si la cadena de patrón contiene un guion bajo o un signo de porcentaje que debe coincidir literalmente, se puede utilizar la cláusula ESCAPE para especificar un carácter que, al anteponerse a un carácter comodín, indica que debe tratarse literalmente:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> d.nombre <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;QA\_%&#39;</span> <span style="color:#66d9ef">ESCAPE</span> <span style="color:#e6db74">&#39;\&#39;</span></span></span></code></pre></div>
<p>Al escapar el guion bajo, se convierte en una parte obligatoria de la expresión. Por ejemplo, QA_East coincidiría, pero QANorth no lo haría.</p>
<h4 id="subconsultas">Subconsultas</h4>
<p>Las subconsultas se pueden utilizar en las cláusulas WHERE y HAVING de una consulta. Una subconsulta es una consulta de selección completa dentro de un par de paréntesis que está incrustada dentro de una expresión condicional. Los resultados de ejecutar la subconsulta (que será un resultado escalar o una colección de valores) se evalúan luego en el contexto de la expresión condicional. Las subconsultas son una técnica poderosa para resolver los escenarios de consulta más complejos.</p>
<p>Considere la siguiente consulta:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> e.salario <span style="color:#f92672">=</span> (<span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">MAX</span>(emp.salario)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado emp)</span></span></code></pre></div>
<p>Esta consulta devuelve el empleado con el salario más alto entre todos los empleados. Se utiliza una subconsulta que consiste en una consulta de agregado (descrita más adelante en este capítulo) para devolver el valor máximo del salario, y luego este resultado se utiliza como clave para filtrar la lista de empleados por salario. Una subconsulta se puede utilizar en la mayoría de las expresiones condicionales y puede aparecer en el lado izquierdo o derecho de una expresión.</p>
<p>El alcance de un nombre de variable de identificación comienza en la consulta donde se define y se extiende hacia abajo en cualquier subconsulta. Las identificadores en la consulta principal pueden ser referenciados por una subconsulta, y los identificadores introducidos por una subconsulta pueden ser referenciados por cualquier subconsulta que cree. Si una subconsulta declara un identificador de variable con el mismo nombre, anula la declaración principal y evita que la subconsulta haga referencia a la variable principal.</p>
<p><strong>Nota:</strong> No se garantiza que la anulación de un nombre de variable de identificación en una subconsulta sea compatible con todos los proveedores. Se deben usar nombres únicos para garantizar la portabilidad.</p>
<p>La capacidad de hacer referencia a una variable desde la consulta principal en la subconsulta permite que ambas consultas estén correlacionadas. Considere el siguiente ejemplo:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">EXISTS</span> (<span style="color:#66d9ef">SELECT</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Telefono p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> p.empleado <span style="color:#f92672">=</span> e <span style="color:#66d9ef">AND</span> p.tipo <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Móvil&#39;</span>)</span></span></code></pre></div>
<p>Esta consulta devuelve a todos los empleados que tienen un número de teléfono celular. Esto también es un ejemplo de una subconsulta que devuelve una colección de valores. La expresión EXISTS en este ejemplo devuelve true si la subconsulta devuelve algún resultado. Devolver el literal 1 desde la subconsulta es una práctica estándar con expresiones EXISTS porque los resultados reales seleccionados por la subconsulta no importan; solo es relevante el número de resultados.</p>
<p>Ten en cuenta que la cláusula WHERE de la subconsulta hace referencia a la variable de identificación <code>e</code> de la consulta principal y la utiliza para filtrar los resultados de la subconsulta. Conceptualmente, se puede pensar que la subconsulta se ejecuta una vez por cada empleado. En la práctica, muchos servidores de bases de datos optimizarán este tipo de consultas en uniones o vistas en línea para maximizar el rendimiento.</p>
<p>Esta consulta también podría haberse escrito utilizando una unión entre las entidades Empleado y Telefono con el operador DISTINCT utilizado para filtrar los resultados. La ventaja de usar la subconsulta correlacionada es que la consulta principal permanece libre de uniones con otras entidades. Con frecuencia, si se utiliza una unión solo para filtrar los resultados, existe una condición de subconsulta equivalente que alternativamente se puede utilizar para eliminar restricciones en la cláusula JOIN de la consulta principal o incluso para mejorar el rendimiento de la consulta.</p>
<p>La cláusula FROM de una subconsulta también puede crear nuevas variables de identificación a partir de expresiones de ruta utilizando una variable de identificación de la consulta principal. Por ejemplo, la consulta anterior también podría haberse escrito de la siguiente manera:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">EXISTS</span> (<span style="color:#66d9ef">SELECT</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> e.telefonos p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> p.tipo <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Móvil&#39;</span>)</span></span></code></pre></div>
<p>En esta versión de la consulta, la subconsulta utiliza la ruta de la asociación de colecciones <code>telefonos</code> desde la variable de identificación del empleado <code>e</code> en la subconsulta. Luego, esto se asigna a una variable de identificación local <code>p</code> que se utiliza para filtrar los resultados por tipo de teléfono. Cada ocurrencia de <code>p</code> se refiere a un solo teléfono asociado al empleado.</p>
<p>Para ilustrar mejor cómo el traductor maneja esta consulta, considera la consulta equivalente escrita en SQL:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e.id, e.nombre, e.salario, e.idGestor, e.idDepartamento, e.idDireccion
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> emp e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">EXISTS</span> (<span style="color:#66d9ef">SELECT</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> telefono p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> p.idEmpleado <span style="color:#f92672">=</span> e.id <span style="color:#66d9ef">AND</span>
</span></span><span style="display:flex;"><span>p.tipo <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Móvil&#39;</span>)</span></span></code></pre></div>
<p>La expresión <code>e.telefonos</code> se convierte en la tabla mapeada por la entidad Telefono. La cláusula WHERE para la subconsulta luego agrega la condición de unión necesaria para correlacionar la subconsulta con la consulta principal, en este caso, la expresión <code>p.idEmpleado = e.id</code>. Los criterios de unión aplicados a la tabla PHONE dan como resultado todos los teléfonos propiedad del empleado relacionado.</p>
<h4 id="expresiones-in">Expresiones IN</h4>
<p>La expresión IN se puede utilizar para verificar si una expresión de ruta de valor único es un miembro de una colección. La colección se puede definir en línea como un conjunto de valores literales o se puede derivar de una subconsulta. La siguiente consulta demuestra la notación literal al seleccionar a todos los empleados que viven en Nueva York o California:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> e.direccion.provincia <span style="color:#66d9ef">IN</span> (<span style="color:#e6db74">&#39;CO&#39;</span>, <span style="color:#e6db74">&#39;PO&#39;</span>)</span></span></code></pre></div>
<p>La forma de subconsulta de la expresión es similar, reemplazando la lista literal con una consulta anidada. La siguiente consulta devuelve empleados que trabajan en departamentos que contribuyen a proyectos que comienzan con el prefijo QA:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> e.departamento <span style="color:#66d9ef">IN</span> (<span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">DISTINCT</span> d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d <span style="color:#66d9ef">JOIN</span> d.empleados de <span style="color:#66d9ef">JOIN</span>
</span></span><span style="display:flex;"><span>de.proyectos p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> p.nombre <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;De%&#39;</span>)</span></span></code></pre></div>
<p>La expresión IN también se puede negar utilizando el operador NOT. Por ejemplo, la siguiente consulta devuelve todas las entidades Telefono que representan números de teléfono que no son para la oficina ni para el hogar:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Telefono p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> p.tipo <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">IN</span> (<span style="color:#e6db74">&#39;Oficina&#39;</span>, <span style="color:#e6db74">&#39;Casa&#39;</span>)</span></span></code></pre></div>
<h4 id="expresiones-de-colecciones">Expresiones de Colecciones</h4>
<p>El operador IS EMPTY es el equivalente lógico de IS NULL, pero para colecciones. Las consultas pueden usar el operador IS EMPTY o su forma negada IS NOT EMPTY para verificar si una ruta de asociación de colecciones se resuelve a una colección vacía o tiene al menos un valor. Por ejemplo, la siguiente consulta devuelve todos los empleados que son gerentes por tener al menos un informe directo:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> e.directos <span style="color:#66d9ef">IS</span> <span style="color:#66d9ef">NOT</span> EMPTY</span></span></code></pre></div>
<p>Ten en cuenta que las expresiones IS EMPTY se traducen a SQL como expresiones de subconsultas. El traductor de consultas puede usar una subconsulta de agregado o usar la expresión SQL EXISTS. Por lo tanto, la siguiente consulta es equivalente a la anterior:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> m
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado m
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> (<span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">COUNT</span>(e)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> e.jefe <span style="color:#f92672">=</span> m) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span></span></span></code></pre></div>
<p>El operador MEMBER OF y su forma negada NOT MEMBER OF son una forma abreviada de verificar si una entidad es un miembro de una ruta de asociación de colecciones. La siguiente consulta devuelve todos los gerentes que están incorrectamente registrados como informando a sí mismos:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> e MEMBER <span style="color:#66d9ef">OF</span> e.directos</span></span></code></pre></div>
<p>Un uso más típico del operador MEMBER OF es en conjunción con un parámetro de entrada. Por ejemplo, la siguiente consulta selecciona a todos los empleados que están asignados a un proyecto especificado:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e, Proyecto p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> p <span style="color:#f92672">=</span> :proyectoSeleccionado <span style="color:#66d9ef">AND</span> e MEMBER <span style="color:#66d9ef">OF</span> p.empleados</span></span></code></pre></div>
<h4 id="exists">EXISTS</h4>
<p>La condición EXISTS devuelve true si una subconsulta devuelve alguna fila. Se mostraron ejemplos de EXISTS anteriormente en la introducción a las subconsultas. El operador EXISTS también se puede negar con el operador NOT. La siguiente consulta selecciona a todos los empleados que no tienen un teléfono celular:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">EXISTS</span> (<span style="color:#66d9ef">SELECT</span> p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> e.telefonos p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> p.tipo <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Móvil&#39;</span>)</span></span></code></pre></div>
<h4 id="any-all-y-some">ANY, ALL y SOME</h4>
<p>Los operadores ANY, ALL y SOME se pueden utilizar para comparar una expresión con los resultados de una subconsulta. Considera el siguiente ejemplo:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> e.directos <span style="color:#66d9ef">IS</span> <span style="color:#66d9ef">NOT</span> EMPTY <span style="color:#66d9ef">AND</span>
</span></span><span style="display:flex;"><span>e.salario <span style="color:#f92672">&lt;</span> <span style="color:#66d9ef">ALL</span> (<span style="color:#66d9ef">SELECT</span> d.salario
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> e.directos d)</span></span></code></pre></div>
<p>Esta consulta devuelve los gerentes que ganan menos que todos los empleados que trabajan para ellos. La subconsulta se evalúa y luego se compara cada valor de la subconsulta con la expresión izquierda, en este caso, el salario del gerente. Cuando se usa el operador ALL, la comparación entre el lado izquierdo de la ecuación y todos los resultados de la subconsulta debe ser verdadera para que la condición general sea verdadera.</p>
<p>El operador ANY se comporta de manera similar, pero la condición general es verdadera siempre y cuando al menos una de las comparaciones entre la expresión y el resultado de la subconsulta sea verdadera. Por ejemplo, si se especificara ANY en lugar de ALL en el ejemplo anterior, el resultado de la consulta sería todos los gerentes que ganaban menos que al menos uno de sus empleados. El operador SOME es un alias para el operador ANY.</p>
<p>Hay simetría entre las expresiones IN y el operador ANY. Considera la siguiente variación del ejemplo anterior del departamento de proyectos, modificado ligeramente para usar ANY en lugar de IN:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> e.departamento <span style="color:#f92672">=</span> <span style="color:#66d9ef">ANY</span> (<span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">DISTINCT</span> d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d <span style="color:#66d9ef">JOIN</span> d.empleados de
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">JOIN</span> de.proyectos p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> p.nombre <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;De%&#39;</span>)</span></span></code></pre></div>
<h3 id="34-herencia-y-polimorfismo">3.4. Herencia y Polimorfismo</h3>
<p>Jakarta Persistence admite la herencia entre entidades. Como resultado, el lenguaje de consultas admite resultados polimórficos donde se pueden devolver múltiples subclases de una entidad mediante la misma consulta.</p>
<p>En el modelo de ejemplo, <code>Proyecto</code> es una clase base para <code>ProyectoDesarrollo</code> y <code>ProyectoDocumentacion</code>. Si se forma una variable de identificación a partir de la entidad <code>Proyecto</code>, los resultados de la consulta incluirán una mezcla de objetos <code>Proyecto</code>, <code>ProyectoDesarrollo</code> y <code>ProyectoDocumentacion</code>, y los resultados se pueden convertir a las subclases según sea necesario. La siguiente consulta recupera todos los proyectos con al menos un empleado:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Proyecto p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> p.empleados <span style="color:#66d9ef">IS</span> <span style="color:#66d9ef">NOT</span> EMPTY</span></span></code></pre></div>
<h4 id="341-discriminación-de-subclases">3.4.1. Discriminación de Subclases</h4>
<p>Si queremos restringir el resultado de la consulta a una subclase particular, podemos utilizar esa subclase específica en la cláusula FROM en lugar de la raíz. Sin embargo, si queremos restringir los resultados a más de una subclase en la consulta pero no a todas las subclases, podemos usar una expresión de tipo en la cláusula WHERE para filtrar los resultados. Una expresión de tipo consiste en la palabra clave TYPE seguida de una expresión entre paréntesis que se resuelve en una entidad. El resultado de una expresión de tipo es el nombre de la entidad, que luego se puede utilizar para comparaciones de tipo. La ventaja de una expresión de tipo es que podemos distinguir entre tipos sin depender de un mecanismo de discriminación en el propio modelo de dominio.</p>
<p>El siguiente ejemplo demuestra el uso de una expresión TYPE para devolver solo proyectos de diseño y calidad:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Proyecto p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">TYPE</span>(p) <span style="color:#f92672">=</span> ProyectoDocumentacion <span style="color:#66d9ef">OR</span> <span style="color:#66d9ef">TYPE</span>(p) <span style="color:#f92672">=</span> ProyectoDesarrollo</span></span></code></pre></div>
<p>Ten en cuenta que no hay comillas alrededor de los identificadores <code>ProyectoDocumentacion</code> y <code>ProyectoDesarrollo</code>. Estos se tratan como nombres de entidad en Jakarta Persistence QL, no como cadenas. A pesar de esta distinción, los parámetros de entrada se pueden usar en lugar de nombres codificados en las cadenas de consulta. Crear una consulta parametrizada que devuelva instancias de un tipo de subclase dado es sencillo, como se ilustra en la siguiente consulta:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Proyecto p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">TYPE</span>(p) <span style="color:#f92672">=</span> :projectType</span></span></code></pre></div>
<h4 id="342-downcasting">3.4.2. Downcasting</h4>
<p>En la mayoría de los casos, al menos una de las subclases contiene algún estado adicional, como el atributo <code>clasificacion</code> en <code>ProyectoDesarrollo</code>. Un atributo de subclase se puede acceder directamente si la consulta abarca solo las entidades de la subclase, pero cuando la consulta abarca una superclase, se debe utilizar la conversión descendente (downcasting). La conversión descendente es la técnica de hacer que una expresión que se refiere a una superclase se aplique a una subclase específica. Se logra mediante el uso del operador <code>TREAT</code>.</p>
<p><code>TREAT</code> se puede usar en la cláusula WHERE para filtrar los resultados según el estado del subtipo de las instancias. La siguiente consulta devuelve todos los proyectos de diseño más todos los proyectos de calidad que tienen una calificación de calidad mayor a 4:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Proyecto p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">TREAT</span>(p <span style="color:#66d9ef">AS</span> ProyectoDesarrollo).clasificacion <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">OR</span> <span style="color:#66d9ef">TYPE</span>(p) <span style="color:#f92672">=</span> ProyectoDocumentacion</span></span></code></pre></div>
<p>La sintaxis de la expresión comienza con la palabra clave <code>TREAT</code>, seguida de su argumento entre paréntesis. El argumento es una expresión de ruta, seguida de la palabra clave <code>AS</code> y luego del nombre de entidad del subtipo objetivo. La expresión de ruta debe resolverse a una superclase del tipo objetivo. La expresión de conversión descendente resultante se resuelve al subtipo objetivo, por lo que se pueden agregar cualquiera de los atributos específicos del subtipo a la expresión de ruta resultante, al igual que se hizo con <code>clasificacion</code> en el ejemplo.</p>
<p>Se pueden incluir varias expresiones <code>TREAT</code> en la cláusula WHERE, cada una haciendo la conversión descendente al mismo o a un tipo de entidad diferente.</p>
<p>Normalmente, cuando se realiza una unión, incluye todas las subclases del tipo de entidad objetivo en la relación que se está uniendo. Para limitar la unión y considerar solo una jerarquía de subclases específica, se puede usar una expresión <code>TREAT</code> en la cláusula FROM. Asignarle un identificador proporciona la ventaja adicional de que el identificador se puede referenciar tanto en la cláusula WHERE como en la cláusula SELECT. La siguiente consulta devuelve todos los empleados que trabajan en proyectos de calidad con una calificación de calidad mayor a 4, más el nombre del proyecto en el que trabajan y su calificación de calidad:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e, q.nombre, q.clasificacion
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">JOIN</span> <span style="color:#66d9ef">TREAT</span>(e.proyectos <span style="color:#66d9ef">AS</span> ProyectoDesarrollo) q
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> q.clasificacion <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">4</span></span></span></code></pre></div>
<p>La expresión <code>TREAT</code> se puede usar de manera similar para otros tipos de uniones, como uniones externas (outer joins) y uniones de recuperación (fetch joins).</p>
<p>Es importante entender el impacto que tiene la herencia entre entidades en el SQL generado por razones de rendimiento.</p>
<h3 id="35-expresiones-escalares">3.5. Expresiones escalares</h3>
<p>Una expresión escalar es un valor literal, una secuencia aritmética, una expresión de función, una expresión de tipo o una expresión de caso que se resuelve a un solo valor escalar. Se puede utilizar en la cláusula SELECT para dar formato a los campos proyectados en consultas de informes o como parte de expresiones condicionales en la cláusula WHERE o HAVING de una consulta. Las subconsultas que se resuelven a valores escalares también se consideran expresiones escalares, pero solo se pueden usar al componer criterios en la cláusula WHERE de una consulta. Las subconsultas nunca se pueden utilizar en la cláusula SELECT.</p>
<h4 id="351-literales">3.5.1. Literales</h4>
<p>Existen varios tipos de literales que se pueden utilizar en Jakarta Persistence QL, incluyendo cadenas, numéricos, booleanos, enumeraciones, tipos de entidad y tipos temporales.</p>
<p>A lo largo de este capítulo, hemos mostrado muchos ejemplos de literales de cadena, entero y booleano. Las comillas simples se utilizan para delimitar literales de cadena y se escapan dentro de una cadena prefijando la comilla con otra comilla simple. Los numéricos exactos y aproximados se pueden definir según las convenciones del lenguaje de programación Java o utilizando la sintaxis estándar SQL-92. Los valores booleanos se representan con los literales TRUE y FALSE.</p>
<p>Las consultas pueden hacer referencia a los tipos enum de Java especificando el nombre completo de la clase enum. El siguiente ejemplo demuestra el uso de un enum en una expresión condicional, utilizando el enum TipoTelefono:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">JOIN</span> e.numerosTelefono p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">KEY</span>(p) <span style="color:#f92672">=</span> com.acme.TipoTelefono.Casa</span></span></code></pre></div>
<p>Un tipo de entidad es simplemente el nombre de entidad de alguna entidad definida y es válido solo cuando se usa con el operador TYPE. Las comillas no se utilizan. Consulte la sección &ldquo;Herencia y polimorfismo&rdquo; para ver ejemplos de cuándo usar un literal de tipo de entidad.</p>
<p>Los literales temporales se especifican utilizando la sintaxis de escape JDBC, que define que las llaves encierran el literal. El primer carácter en la secuencia es un &ldquo;d&rdquo; o un &ldquo;t&rdquo; para indicar que el literal es una fecha o una hora, respectivamente. Si el literal representa una marca de tiempo, se utiliza &ldquo;ts&rdquo;. Después del indicador de tipo hay un separador de espacio y luego la fecha real, la hora o la información de la marca de tiempo envuelta entre comillas simples. Las formas generales de los tres tipos de literales temporales, con ejemplos acompañantes, son las siguientes:</p>
<ul>
<li>{d &lsquo;yyyy-mm-dd&rsquo;} p. ej., {d &lsquo;2009-11-05&rsquo;}</li>
<li>{t &lsquo;hh-mm-ss&rsquo;} p. ej., {t &lsquo;12-45-52&rsquo;}</li>
<li>{ts &lsquo;yyyy-mm-dd hh-mm-ss.f&rsquo;} p. ej., {ts &lsquo;2009-11-05 12-45-52.325&rsquo;}</li>
</ul>
<p>Toda la información temporal dentro de comillas simples se expresa como dígitos. La parte fraccionaria de la marca de tiempo (la parte &ldquo;.f&rdquo;) puede tener varios dígitos y es opcional. Al usar cualquiera de estos literales temporales, recuerde que solo son interpretados por los controladores que admiten la sintaxis de escape JDBC. Normalmente, el proveedor no intentará traducir ni procesar los literales temporales.</p>
<h4 id="352-function-expressions">3.5.2. Function Expressions</h4>
<p>Las expresiones escalares pueden aprovechar funciones que se pueden utilizar para transformar los resultados de la consulta. La Tabla 8-1 resume la sintaxis de cada una de las expresiones de funciones admitidas.</p>
<table>
  <thead>
      <tr>
          <th>Función</th>
          <th>Descripción</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>ABS(numero)</td>
          <td>Devuelve la versión no firmada del argumento numero. El tipo de resultado es el mismo que el tipo de argumento (entero, float o double).</td>
      </tr>
      <tr>
          <td>CONCAT(string1, string2)</td>
          <td>Devuelve una nueva cadena que es la concatenación de sus argumentos, string1 y string2.</td>
      </tr>
      <tr>
          <td>CURRENT_DATE</td>
          <td>Devuelve la fecha actual según lo definido por el servidor de base de datos.</td>
      </tr>
      <tr>
          <td>CURRENT_TIME</td>
          <td>Devuelve la hora actual según lo definido por el servidor de base de datos.</td>
      </tr>
      <tr>
          <td>CURRENT_TIMESTAMP</td>
          <td>Devuelve la marca de tiempo actual según lo definido por el servidor de base de datos.</td>
      </tr>
      <tr>
          <td>INDEX(identification variable)</td>
          <td>Devuelve la posición de una entidad dentro de una lista ordenada.</td>
      </tr>
      <tr>
          <td>EXTRACT(datetime_field FROM datetime_expression)</td>
          <td>Devuelve el valor del campo o parte correspondiente de la fecha y hora.</td>
      </tr>
      <tr>
          <td>LENGTH(string)</td>
          <td>Devuelve el número de caracteres en el argumento de cadena.</td>
      </tr>
      <tr>
          <td>LOCATE(string1, string2 [, start])</td>
          <td>Devuelve la posición de string1 en string2, opcionalmente comenzando en la posición indicada por start. El resultado es cero si no se puede encontrar la cadena.</td>
      </tr>
      <tr>
          <td>LOWER(string)</td>
          <td>Devuelve la forma en minúsculas del argumento de cadena.</td>
      </tr>
      <tr>
          <td>MOD(number1, number2)</td>
          <td>Devuelve el módulo de los argumentos numéricos number1 y number2 como un entero.</td>
      </tr>
      <tr>
          <td>SIZE(collection)</td>
          <td>Devuelve el número de elementos en la colección, o cero si la colección está vacía.</td>
      </tr>
      <tr>
          <td>SQRT(numero)</td>
          <td>Devuelve la raíz cuadrada del argumento numérico como un double.</td>
      </tr>
      <tr>
          <td>SUBSTRING(string, start, end)</td>
          <td>Devuelve una parte de la cadena de entrada, comenzando en el índice indicado por start hasta la longitud de los caracteres. Los índices de cadena se miden a partir de uno.</td>
      </tr>
      <tr>
          <td>UPPER(string)</td>
          <td>Devuelve la forma en mayúsculas del argumento de cadena.</td>
      </tr>
      <tr>
          <td>TRIM([[LEADING|TRAILING|BOTH] [char] FROM] string)</td>
          <td>Elimina caracteres iniciales y/o finales de una cadena. Si no se utiliza la palabra clave opcional LEADING, TRAILING o BOTH, se eliminan tanto los caracteres iniciales como los finales. El carácter de recorte predeterminado es el espacio.</td>
      </tr>
  </tbody>
</table>
<p>La función SIZE requiere atención especial porque es una notación abreviada para una subconsulta agregada. Por ejemplo, considere la siguiente consulta que devuelve todos los departamentos con solo dos empleados:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">SIZE</span>(d.empleados) <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span></span></span></code></pre></div>
<p>Al igual que las expresiones de colección IS EMPTY y MEMBER OF, la función SIZE se traducirá a SQL utilizando una subconsulta. La forma equivalente del ejemplo anterior usando una subconsulta es la siguiente:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> (<span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">COUNT</span>(e)
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">FROM</span> d.empleados e) <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span></span></span></code></pre></div>
<p>El caso de uso para la función INDEX puede no ser obvio al principio. Cuando se utilizan colecciones ordenadas, cada elemento de la colección contiene dos piezas de información: el valor almacenado en la colección y su posición numérica dentro de la colección. Las consultas pueden usar la función INDEX para determinar la posición numérica de un elemento en una colección y luego usar ese número con fines de informes o filtrado. Por ejemplo, si los números de teléfono de un empleado se almacenan en orden de prioridad, la siguiente consulta devolvería el primer (y más importante) número para cada empleado:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e.nombre, p.numero
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">JOIN</span> e.telefonos p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">INDEX</span>(p) <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span></span></span></code></pre></div>
<h4 id="353-funciones-nativas-de-la-base-de-datos-function">3.5.3. Funciones Nativas de la base de datos: FUNCTION</h4>
<p>Uno de los beneficios de Jakarta Persistence QL es que desacopla la aplicación de la base de datos subyacente. Sin embargo, ocasionalmente es necesario utilizar funciones nativas que son propias de la base de datos o definidas por el administrador del sistema. Si bien <strong>el uso de estas funciones puede vincular la consulta a la base de datos de destino</strong>, aún hay un argumento para utilizar la independencia del mapeo de entidades de Jakarta Persistence QL.</p>
<p>Las <strong>funciones de base de datos pueden ser ejecutarse en las consultas de Jakarta Persistence QL a través del uso de la expresión <code>FUNCTION</code></strong>. La palabra clave FUNCTION, <strong>seguida del nombre de la función y los argumentos de la función</strong>, debe resolverse a un valor escalar que sea aritmético, booleano, de cadena o de un tipo temporal, como fecha, hora o marca de tiempo. Las expresiones <code>FUNCTION</code> pueden ser utilizadas donde sea que los tipos escalares encajen en una expresión, y el tipo de resultado debe coincidir con lo que el resto de la expresión espera. Los argumentos deben ser literales, expresiones que se resuelvan a escalares o parámetros de entrada.</p>
<p>La siguiente consulta invoca una función de base de datos llamada <code>deberiaTenerBonus</code>. El ID del departamento del empleado y los proyectos en los que trabaja se pasan como parámetros, y el tipo de retorno de la función es un booleano. El resultado crea una condición que hace que la consulta devuelva el conjunto de todos los empleados que obtienen un bono:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">DISTINCT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">JOIN</span> e.proyectos p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">FUNCTION</span>(<span style="color:#e6db74">&#39;deberiaTenerBonus&#39;</span>, e.dept.id, p.id)</span></span></code></pre></div>
<h4 id="354-expresiones-case">3.5.4. Expresiones CASE</h4>
<p>La expresión CASE de Jakarta Persistence QL es una adaptación de la expresión CASE ANSI SQL-92, teniendo en cuenta las capacidades del lenguaje Jakarta Persistence QL. Las expresiones CASE son herramientas poderosas para introducir lógica condicional en una consulta, con el beneficio de que el resultado de una expresión CASE se puede utilizar en cualquier lugar donde sea válida una expresión escalar.</p>
<p>Las expresiones CASE están disponibles en cuatro formas, dependiendo de la flexibilidad requerida por la consulta. La primera y más flexible forma es la expresión de caso general. Todos los demás tipos de expresión CASE se pueden componer en términos de la expresión de caso general. Tiene la siguiente forma:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CASE</span> <span style="color:#960050;background-color:#1e0010">{</span><span style="color:#66d9ef">WHEN</span> <span style="color:#f92672">&lt;</span>cond_expr<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">THEN</span> <span style="color:#f92672">&lt;</span>scalar_expr<span style="color:#f92672">&gt;</span><span style="color:#960050;background-color:#1e0010">}</span><span style="color:#f92672">+</span> <span style="color:#66d9ef">ELSE</span> <span style="color:#f92672">&lt;</span>scalar_expr<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">END</span></span></span></code></pre></div>
<p>El corazón de la expresión CASE es la cláusula WHEN, de la cual debe haber al menos una. El procesador de consultas resuelve la expresión condicional de cada cláusula WHEN en orden hasta que encuentra una que tenga éxito. Luego evalúa la expresión escalar para esa cláusula WHEN y la devuelve como resultado de la expresión CASE. Si ninguna de las expresiones condicionales de la cláusula WHEN produce un resultado verdadero, se evalúa y devuelve la expresión escalar de la cláusula ELSE. El siguiente ejemplo muestra la expresión de caso general, enumerando el nombre y tipo de cada proyecto que tiene empleados asignados:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> p.nombre,
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CASE</span> <span style="color:#66d9ef">WHEN</span> <span style="color:#66d9ef">TYPE</span>(p) <span style="color:#f92672">=</span> ProyectoDocumentacion <span style="color:#66d9ef">THEN</span> <span style="color:#e6db74">&#39;Desarrollo&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHEN</span> <span style="color:#66d9ef">TYPE</span>(p) <span style="color:#f92672">=</span> ProyectoDesarrollo <span style="color:#66d9ef">THEN</span> <span style="color:#e6db74">&#39;Desarrollo&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ELSE</span> <span style="color:#e6db74">&#39;No-Desarrollo&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">END</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Proyecto p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> p.empleados <span style="color:#66d9ef">IS</span> <span style="color:#66d9ef">NOT</span> EMPTY</span></span></code></pre></div>
<p>Observe el uso de la expresión de caso como parte de la cláusula select. Las expresiones CASE son una herramienta poderosa para transformar datos de entidades en consultas de informes.</p>
<p>Una ligera variación en la expresión de caso general es la expresión de caso simple. En lugar de verificar una expresión condicional en cada cláusula WHEN, identifica un valor y resuelve una expresión escalar en cada cláusula WHEN. El primero en coincidir con el valor activa una segunda expresión escalar que se convierte en el valor de la expresión de caso. Tiene la siguiente forma:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CASE</span> <span style="color:#f92672">&lt;</span>value<span style="color:#f92672">&gt;</span> <span style="color:#960050;background-color:#1e0010">{</span><span style="color:#66d9ef">WHEN</span> <span style="color:#f92672">&lt;</span>scalar_expr1<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">THEN</span> <span style="color:#f92672">&lt;</span>scalar_expr2<span style="color:#f92672">&gt;</span><span style="color:#960050;background-color:#1e0010">}</span><span style="color:#f92672">+</span> <span style="color:#66d9ef">ELSE</span> <span style="color:#f92672">&lt;</span>scalar_expr<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">END</span></span></span></code></pre></div>
<p>El <code>&lt;value&gt;</code> en esta forma de la expresión es ya sea una expresión de ruta que lleva a un campo de estado o una expresión de tipo para una comparación polimórfica. Podemos simplificar el último ejemplo convirtiéndolo en una expresión de caso simple:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> p.nombre,
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CASE</span> <span style="color:#66d9ef">TYPE</span>(p)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHEN</span> ProyectoDocumentacion <span style="color:#66d9ef">THEN</span> <span style="color:#e6db74">&#39;Desarrollo&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHEN</span> ProyectoDesarrollo <span style="color:#66d9ef">THEN</span> <span style="color:#e6db74">&#39;Desarrollo&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ELSE</span> <span style="color:#e6db74">&#39;Non-Desarrollo&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">END</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Proyecto p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> p.empleados <span style="color:#66d9ef">IS</span> <span style="color:#66d9ef">NOT</span> EMPTY</span></span></code></pre></div>
<p>La tercera forma de la expresión de caso es la expresión coalesce. Esta forma de la expresión de caso acepta una secuencia de una o más expresiones escalares. Tiene la siguiente forma:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>COALESCE(<span style="color:#f92672">&lt;</span>scalar_expr<span style="color:#f92672">&gt;</span> <span style="color:#960050;background-color:#1e0010">{</span>,<span style="color:#f92672">&lt;</span>scalar_expr<span style="color:#f92672">&gt;</span><span style="color:#960050;background-color:#1e0010">}</span><span style="color:#f92672">+</span>)</span></span></code></pre></div>
<p>Las expresiones escalares en la expresión COALESCE se resuelven en orden. La primera que devuelve un valor no nulo se convierte en el resultado de la expresión. El siguiente ejemplo demuestra este uso, devolviendo ya sea el nombre descriptivo de cada departamento o el identificador del departamento si no se ha definido ningún nombre:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> COALESCE(d.nombre, d.id)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d</span></span></code></pre></div>
<p>La cuarta y última forma de la expresión de caso es algo inusual. Acepta dos expresiones escalares y resuelve ambas. Si los resultados de las dos expresiones son iguales, el resultado de la expresión es nulo. De lo contrario, devuelve el resultado de la primera expresión escalar. Esta forma de la expresión de caso se identifica por la palabra clave NULLIF:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">NULLIF</span>(<span style="color:#f92672">&lt;</span>scalar_expr1<span style="color:#f92672">&gt;</span>, <span style="color:#f92672">&lt;</span>scalar_expr2<span style="color:#f92672">&gt;</span>)</span></span></code></pre></div>
<p>Un truco útil con NULLIF es excluir resultados de una función de agregación. Por ejemplo, la siguiente consulta devuelve un recuento de todos los departamentos y un recuento de todos los departamentos que no tienen el nombre &lsquo;QA&rsquo;:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>), <span style="color:#66d9ef">COUNT</span>(<span style="color:#66d9ef">NULLIF</span>(d.nombre, <span style="color:#e6db74">&#39;QA&#39;</span>))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d</span></span></code></pre></div>
<p>Si el nombre del departamento es &lsquo;QA&rsquo;, NULLIF devolverá NULL, lo cual luego será ignorado por la función COUNT. Las funciones de agregación ignoran los valores NULL, y se describen más adelante en la sección &ldquo;Consultas de Agregación&rdquo;.</p>
<h3 id="36-cláusula-order-by">3.6. Cláusula ORDER BY</h3>
<p>Las consultas pueden ordenarse opcionalmente mediante ORDER BY y una o más expresiones que consisten en variables de identificación, variables de resultado, una expresión de ruta que resuelve a una sola entidad o una expresión de ruta que resuelve a un campo de estado persistente. Las palabras clave opcionales ASC y DESC después de la expresión se pueden usar para indicar órdenes ascendentes o descendentes, respectivamente. El orden de clasificación predeterminado es ascendente.</p>
<p>El siguiente ejemplo demuestra la clasificación por un solo campo:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> e.nombre <span style="color:#66d9ef">DESC</span></span></span></code></pre></div>
<p>También se pueden usar múltiples expresiones para refinar el orden de clasificación:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e, d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">JOIN</span> e.departamento d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> d.nombre, e.nombre <span style="color:#66d9ef">DESC</span></span></span></code></pre></div>
<p>Se puede declarar una variable de resultado en la cláusula SELECT con el propósito de especificar un ítem que se ordenará. Una variable de resultado es efectivamente un alias para su ítem de selección asignado. Ahorra a la cláusula ORDER BY tener que duplicar expresiones de ruta de la cláusula SELECT y permite hacer referencia a ítems de selección calculados e ítems que utilizan funciones de agregación. La siguiente consulta define dos variables de resultado en la cláusula SELECT y luego las utiliza para ordenar los resultados en la cláusula ORDER BY:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e.nombre, e.salario <span style="color:#f92672">*</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">05</span> <span style="color:#66d9ef">AS</span> bonus, d.nombre <span style="color:#66d9ef">AS</span> nomberDepartamento
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">JOIN</span> e.departamento d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> nomberDepartamento, bonus <span style="color:#66d9ef">DESC</span></span></span></code></pre></div>
<p>Si la cláusula SELECT de la consulta utiliza expresiones de ruta de campo de estado, la cláusula ORDER BY se limita a las mismas expresiones de ruta utilizadas en la cláusula SELECT. Por ejemplo, la siguiente consulta no es legal:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e.nombre
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> e.salario <span style="color:#66d9ef">DESC</span></span></span></code></pre></div>
<p>Debido a que el tipo de resultado de la consulta es el nombre del empleado, que es de tipo String, el resto de los campos de estado de Empleado ya no están disponibles para ordenar.</p>
<h2 id="4-consultas-de-agregación">4. Consultas de Agregación</h2>
<p>Una consulta de agregación es una variación de una consulta select normal. Una consulta de agregación agrupa resultados y aplica funciones de agregación para obtener información resumida sobre los resultados de la consulta. Una consulta se considera una consulta de agregación si utiliza una función de agregación o posee una cláusula GROUP BY y / o una cláusula HAVING. La forma más típica de consulta de agregación implica el uso de una o más expresiones de agrupación y funciones de agregación en la cláusula SELECT emparejadas con expresiones de agrupación en la cláusula GROUP BY. La sintaxis de una consulta de agregación es la siguiente:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">&lt;</span>expresion_seleccionada<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> <span style="color:#f92672">&lt;</span>clausula_from<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>[<span style="color:#66d9ef">WHERE</span> <span style="color:#f92672">&lt;</span>expresion_condicional<span style="color:#f92672">&gt;</span>]
</span></span><span style="display:flex;"><span>[<span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> <span style="color:#f92672">&lt;</span>clausula_group_by<span style="color:#f92672">&gt;</span>]
</span></span><span style="display:flex;"><span>[<span style="color:#66d9ef">HAVING</span> <span style="color:#f92672">&lt;</span>expresion_condicional<span style="color:#f92672">&gt;</span>]
</span></span><span style="display:flex;"><span>[<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> <span style="color:#f92672">&lt;</span>clausula_order_by<span style="color:#f92672">&gt;</span>]</span></span></code></pre></div>
<p>Las cláusulas SELECT, FROM y WHERE se comportan de manera similar a como se describió anteriormente en las consultas select, con la excepción de algunas restricciones sobre cómo se formula la cláusula SELECT.
El poder de una consulta de agregación proviene del uso de funciones de agregación sobre datos agrupados. Considera el siguiente ejemplo de agregación simple:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">AVG</span>(e.salario)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e</span></span></code></pre></div>
<p>Esta consulta devuelve el salario promedio de todos los empleados de la empresa. AVG es una función de agregación que toma una expresión de ruta de campo de estado numérico como argumento y calcula el promedio sobre el grupo. Como no se especificó ninguna cláusula GROUP BY, el grupo aquí es el conjunto completo de empleados.
Ahora considera esta variación, donde el resultado se ha agrupado por el nombre del departamento:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> d.nombre, <span style="color:#66d9ef">AVG</span>(e.salario)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d <span style="color:#66d9ef">JOIN</span> d.empleados e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> d.nombre</span></span></code></pre></div>
<p>Esta consulta devuelve el nombre de cada departamento y el salario promedio de los empleados en ese departamento. La entidad Departamento se une a la entidad Empleado a través de la relación empleados y luego se forma en un grupo definido por el nombre del departamento. La función AVG luego calcula su resultado en función de los datos de empleados en este grupo.
Esto se puede extender aún más para filtrar los datos de modo que los salarios de los gerentes no se incluyan:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> d.nombre, <span style="color:#66d9ef">AVG</span>(e.salario)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d <span style="color:#66d9ef">JOIN</span> d.empleados e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> e.directos <span style="color:#66d9ef">IS</span> EMPTY
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> d.nombre</span></span></code></pre></div>
<p>Finalmente, podemos extender esto una última vez para devolver solo los departamentos donde el salario promedio es mayor a $50,000. Considera la siguiente versión de la consulta anterior:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> d.nombre, <span style="color:#66d9ef">AVG</span>(e.salario)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d <span style="color:#66d9ef">JOIN</span> d.empleados e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> e.directos <span style="color:#66d9ef">IS</span> EMPTY
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> d.nombre
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">HAVING</span> <span style="color:#66d9ef">AVG</span>(e.salario) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">50000</span></span></span></code></pre></div>
<p>Para comprender mejor esta consulta, revisemos los pasos lógicos que se llevaron a cabo para ejecutarla. Las bases de datos utilizan muchas técnicas para optimizar este tipo de consultas, pero conceptualmente se sigue el mismo proceso.
Primero, se ejecuta la siguiente consulta sin agrupación:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> d.nombre, e.salario
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d <span style="color:#66d9ef">JOIN</span> d.empleados e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> e.directos <span style="color:#66d9ef">IS</span> EMPTY</span></span></code></pre></div>
<p>Esto producirá un conjunto de resultados que consiste en todos los pares de nombre de departamento y valor de salario. El motor de consulta luego inicia un nuevo conjunto de resultados y realiza un segundo paso sobre los datos, recopilando todos los valores de salario para cada nombre de departamento y entregándolos a la función AVG. Esta función devuelve el promedio del grupo, que luego se verifica contra los criterios de la cláusula HAVING. Si el valor promedio es mayor que $50,000, el motor de consulta genera una fila de resultados que consiste en el nombre del departamento y el valor promedio del salario.</p>
<p>Las siguientes secciones describen las funciones de agregación disponibles para su uso en consultas de agregación y el uso de las cláusulas GROUP BY y HAVING.</p>
<h3 id="41-funciones-de-agregación">4.1 Funciones de Agregación</h3>
<h3 id="avg">AVG</h3>
<p>La función AVG toma una expresión de ruta de campo de estado como argumento y calcula el valor promedio de ese campo de estado sobre el grupo. El tipo de campo de estado debe ser numérico y el resultado se devuelve como un Double.</p>
<h3 id="count">COUNT</h3>
<p>La función COUNT toma ya sea una variable de identificación o una expresión de ruta como argumento. Esta expresión de ruta puede resolverse a un campo de estado o un campo de asociación de valor único. El resultado de la función es un valor Long que representa la cantidad de valores en el grupo. El argumento de la función COUNT puede ir precedido opcionalmente por la palabra clave DISTINCT, en cuyo caso se eliminan los valores duplicados antes de contar.</p>
<p>Ejemplo: Contar la cantidad de teléfonos asociados con cada empleado y la cantidad de tipos de números distintos (celular, oficina, hogar, etc.).</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e, <span style="color:#66d9ef">COUNT</span>(p), <span style="color:#66d9ef">COUNT</span>(<span style="color:#66d9ef">DISTINCT</span> p.tipo)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">JOIN</span> e.telefonos p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> e;</span></span></code></pre></div>
<h3 id="max">MAX</h3>
<p>La función MAX toma una expresión de campo de estado como argumento y devuelve el valor máximo en el grupo para ese campo de estado.</p>
<h3 id="min">MIN</h3>
<p>La función MIN toma una expresión de campo de estado como argumento y devuelve el valor mínimo en el grupo para ese campo de estado.</p>
<h3 id="sum">SUM</h3>
<p>La función SUM toma una expresión de campo de estado como argumento y calcula la suma de los valores en ese campo de estado sobre el grupo. El tipo de campo de estado debe ser numérico y el tipo de resultado debe corresponder al tipo de campo. Por ejemplo, si se suma un campo Double, el resultado se devolverá como un Double. Si se suma un campo Long, la respuesta se devolverá como un Long.</p>
<h3 id="42-cláusula-group-by">4.2 Cláusula GROUP BY</h3>
<p>La cláusula GROUP BY define las expresiones de agrupación sobre las cuales se agregarán los resultados. Una expresión de agrupación debe ser una expresión de ruta de campo de valor único (campo de estado, embebido que lleva a un campo de estado o campo de asociación de valor único) o una variable de identificación. Si se utiliza una variable de identificación, la entidad no debe tener ningún campo de estado serializado u objetos grandes.</p>
<p>El siguiente ejemplo cuenta la cantidad de empleados en cada departamento:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> d.nombre, <span style="color:#66d9ef">COUNT</span>(e)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d <span style="color:#66d9ef">JOIN</span> d.empleados e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> d.nombre;</span></span></code></pre></div>
<p>Observa que la misma expresión de campo utilizada en la cláusula SELECT se repite en la cláusula GROUP BY. Todas las expresiones que no son de agregación deben enumerarse de esta manera.</p>
<p>Es posible aplicar más de una función de agregación, como se muestra en el siguiente ejemplo:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> d.nombre, <span style="color:#66d9ef">COUNT</span>(e), <span style="color:#66d9ef">AVG</span>(e.salario)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d <span style="color:#66d9ef">JOIN</span> d.empleados e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> d.nombre;</span></span></code></pre></div>
<p>En esta variación de la consulta, se calcula el salario promedio de todos los empleados en cada departamento además de contar la cantidad de empleados en el departamento.</p>
<p>También se pueden usar múltiples expresiones de agrupación para desglosar aún más los resultados:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> d.nombre, e.salario, <span style="color:#66d9ef">COUNT</span>(p)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Departamento d <span style="color:#66d9ef">JOIN</span> d.empleados e <span style="color:#66d9ef">JOIN</span> e.proyectos p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> d.nombre, e.salario;</span></span></code></pre></div>
<p>Ambas expresiones de agrupación, el nombre del departamento y el salario del empleado, deben enumerarse tanto en la cláusula SELECT como en la cláusula GROUP BY. Para cada departamento, esta consulta cuenta la cantidad de proyectos asignados a los empleados según su salario.</p>
<p>En ausencia de una cláusula GROUP BY, las funciones de agregación se aplicarán a todo el conjunto de resultados como un único grupo. Por ejemplo, la siguiente consulta devuelve la cantidad de empleados y su salario promedio en toda la empresa:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">COUNT</span>(e), <span style="color:#66d9ef">AVG</span>(e.salario)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e;</span></span></code></pre></div>
<h3 id="43-cláusula-having">4.3 Cláusula HAVING</h3>
<p>La cláusula HAVING define un filtro que se aplicará después de que los resultados de la consulta hayan sido agrupados. Es efectivamente una cláusula WHERE secundaria, y su definición es la misma: la palabra clave HAVING seguida de una expresión condicional. La diferencia clave con la cláusula HAVING es que sus expresiones condicionales están principalmente limitadas a campos de estado o campos de asociación de valor único incluidos en el grupo.</p>
<p>Las expresiones condicionales en la cláusula HAVING también pueden usar funciones de agregación sobre los elementos utilizados para la agrupación, o funciones de agregación que aparecen en la cláusula SELECT. En muchos aspectos, el uso principal de la cláusula HAVING es restringir los resultados basados en los valores de resultado agregados. La siguiente consulta utiliza esta técnica para recuperar todos los empleados asignados a dos o más proyectos:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> e, <span style="color:#66d9ef">COUNT</span>(p)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Empleado e <span style="color:#66d9ef">JOIN</span> e.proyectos p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">HAVING</span> <span style="color:#66d9ef">COUNT</span>(p) <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">2</span>;</span></span></code></pre></div>
<h2 id="5-consultas-de-actualización">5. Consultas de Actualización</h2>
<p>Las consultas de actualización proporcionan un equivalente a la instrucción SQL UPDATE pero con expresiones condicionales de Jakarta Persistence QL. La forma de una consulta de actualización es la siguiente:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">UPDATE</span> <span style="color:#f92672">&lt;</span>nombre de entidad<span style="color:#f92672">&gt;</span> [[<span style="color:#66d9ef">AS</span>] <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">variable</span> de identificación<span style="color:#f92672">&gt;</span>]
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SET</span> <span style="color:#f92672">&lt;</span>declaración de actualización<span style="color:#f92672">&gt;</span> <span style="color:#960050;background-color:#1e0010">{</span>, <span style="color:#f92672">&lt;</span>declaración de actualización<span style="color:#f92672">&gt;</span><span style="color:#960050;background-color:#1e0010">}</span><span style="color:#f92672">*</span>
</span></span><span style="display:flex;"><span>[<span style="color:#66d9ef">WHERE</span> <span style="color:#f92672">&lt;</span>expresión condicional<span style="color:#f92672">&gt;</span>]</span></span></code></pre></div>
<p>Cada declaración UPDATE consiste en una expresión de ruta de valor único, el operador de asignación (=) y una expresión. Las opciones de expresión para la declaración de asignación están ligeramente restringidas en comparación con las expresiones condicionales regulares. El lado derecho de la asignación debe resolverse a un literal, una expresión simple que resuelva a un tipo básico, una expresión de función, una variable de identificación o un parámetro de entrada. El tipo de resultado de esa expresión debe ser compatible con la ruta de asociación simple o el campo de estado persistente en el lado izquierdo de la asignación.</p>
<p>El siguiente ejemplo simple demuestra la consulta de actualización al darle un aumento a $60,000 a los empleados que ganan $55,000:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">UPDATE</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SET</span> e.salario <span style="color:#f92672">=</span> <span style="color:#ae81ff">60000</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> e.salario <span style="color:#f92672">=</span> <span style="color:#ae81ff">55000</span>;</span></span></code></pre></div>
<p>La cláusula WHERE de una declaración UPDATE funciona de la misma manera que una declaración SELECT y puede utilizar la variable de identificación definida en la cláusula UPDATE en expresiones. Una consulta de actualización ligeramente más compleja pero más realista sería otorgar un aumento de $5,000 a los empleados que trabajaron en un proyecto en particular:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">UPDATE</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SET</span> e.salario <span style="color:#f92672">=</span> e.salario <span style="color:#f92672">+</span> <span style="color:#ae81ff">5000</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">EXISTS</span> (<span style="color:#66d9ef">SELECT</span> p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> e.proyectos p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> p.nombre <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Versión2&#39;</span>);</span></span></code></pre></div>
<p>Se pueden modificar más de una propiedad de la entidad objetivo con una sola declaración UPDATE. Por ejemplo, la siguiente consulta actualiza el intercambio telefónico para los empleados en la ciudad de Ottawa y cambia la terminología del tipo de teléfono de Oficina a Negocios:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">UPDATE</span> Telefono p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SET</span> p.numero <span style="color:#f92672">=</span> CONCAT(<span style="color:#e6db74">&#39;288&#39;</span>, <span style="color:#66d9ef">SUBSTRING</span>( p.numero,
</span></span><span style="display:flex;"><span>LOCATE(<span style="color:#e6db74">&#39;-&#39;</span>, p.numero), <span style="color:#ae81ff">4</span>)),
</span></span><span style="display:flex;"><span>p.tipo <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Business&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> p.empleado.direccion.city <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Ottawa&#39;</span> <span style="color:#66d9ef">AND</span>
</span></span><span style="display:flex;"><span>p.tipo <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Oficina&#39;</span>;</span></span></code></pre></div>
<h2 id="6-consultas-de-borrado">6. Consultas de borrado</h2>
<p>La consulta de eliminación proporciona la misma capacidad que la instrucción SQL DELETE, pero con expresiones condicionales de Jakarta Persistence QL. La forma de una consulta de eliminación es la siguiente:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">DELETE</span> <span style="color:#66d9ef">FROM</span> <span style="color:#f92672">&lt;</span>nombre de entidad<span style="color:#f92672">&gt;</span> [[<span style="color:#66d9ef">AS</span>] <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">variable</span> de identificación<span style="color:#f92672">&gt;</span>]
</span></span><span style="display:flex;"><span>[<span style="color:#66d9ef">WHERE</span> <span style="color:#f92672">&lt;</span>condición<span style="color:#f92672">&gt;</span>]</span></span></code></pre></div>
<p>El siguiente ejemplo elimina a todos los empleados que no están asignados a un departamento:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">DELETE</span> <span style="color:#66d9ef">FROM</span> Empleado e
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> e.departamento <span style="color:#66d9ef">IS</span> <span style="color:#66d9ef">NULL</span>;</span></span></code></pre></div>
<p>La cláusula WHERE de una declaración DELETE funciona de la misma manera que lo haría para una declaración SELECT. Todas las expresiones condicionales están disponibles para filtrar el conjunto de entidades que se eliminarán. Si no se proporciona la cláusula WHERE, se eliminan todas las entidades del tipo dado.</p>
<p>Las consultas de eliminación son polimórficas. Todas las instancias de subclases de entidades que cumplan con los criterios de la consulta de eliminación también se eliminarán. Sin embargo, las consultas de eliminación no respetan las reglas de cascada. No se eliminarán entidades que no sean del tipo referenciado en la consulta y sus subclases, incluso si la entidad tiene relaciones con otras entidades con eliminaciones en cascada habilitadas.</p>
<p><a href="https://thorben-janssen.com/jpql/" rel="external" target="_blank">https://thorben-janssen.com/jpql/</a></p>

  <footer class="footline"></article>
<footer>
   <i class='fas fa-user'></i>  <span itemprop="name"> </span>

<i class='fas fa-calendar'></i> Última actualización: 23.09.2025  
</footer>
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<img  src="../../../images/logo-ies.png" style="color:white;  font-size: 20px;" id="logo" href="http://manuais.pages.iessanclemente.net/apuntes/">
        </div>
        <search><form action="https://manuais.pages.iessanclemente.net/plantillas/dam/ad/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Buscar (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Buscar</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Buscar...">
            <button class="search-clear" type="button" data-search-clear="" title="Borrar búsqueda"><i class="fas fa-times" title="Borrar búsqueda"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/index.html"><a class="padding" href="../../../index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/index.html"><input type="checkbox" id="R-section-0758abab80c2aa84781892223aa808b3" aria-controls="R-subsections-0758abab80c2aa84781892223aa808b3"><label for="R-section-0758abab80c2aa84781892223aa808b3"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú UD 0. Refuerzo y ayudas complementarias</span></label><a class="padding" href="../../../00ayudas/index.html">UD 0. Refuerzo y ayudas complementarias<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-0758abab80c2aa84781892223aa808b3" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/00configjava/index.html"><input type="checkbox" id="R-section-1b1977ce428c9ac8dab8b72f8979bcb5" aria-controls="R-subsections-1b1977ce428c9ac8dab8b72f8979bcb5"><label for="R-section-1b1977ce428c9ac8dab8b72f8979bcb5"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú 01 Configuración y despliegue</span></label><a class="padding" href="../../../00ayudas/00configjava/index.html">01 Configuración y despliegue<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-1b1977ce428c9ac8dab8b72f8979bcb5" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/00configjava/01jarfiles/index.html"><a class="padding" href="../../../00ayudas/00configjava/01jarfiles/index.html">01 Archivos Jar<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/00configjava/02jarwithmaven/index.html"><a class="padding" href="../../../00ayudas/00configjava/02jarwithmaven/index.html">02 Creación de un JAR ejecutable con Java con Apache Maven<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/00configjava/03dependencias/index.html"><a class="padding" href="../../../00ayudas/00configjava/03dependencias/index.html">03. Dependencias Maven.<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/02javageneral/index.html"><input type="checkbox" id="R-section-0ee0a79915535bc59e8b9d0e78f65ef9" aria-controls="R-subsections-0ee0a79915535bc59e8b9d0e78f65ef9"><label for="R-section-0ee0a79915535bc59e8b9d0e78f65ef9"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú 02 Java General</span></label><a class="padding" href="../../../00ayudas/02javageneral/index.html">02 Java General<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-0ee0a79915535bc59e8b9d0e78f65ef9" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/02javageneral/01streamapi/index.html"><a class="padding" href="../../../00ayudas/02javageneral/01streamapi/index.html">00.01 Java Stream API<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/02javageneral/02urlfiles/index.html"><a class="padding" href="../../../00ayudas/02javageneral/02urlfiles/index.html">00.02 Descarga de archivos de Internet<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/02javageneral/03hashcode/index.html"><a class="padding" href="../../../00ayudas/02javageneral/03hashcode/index.html">03 Implementación de hashCode()<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/03layouts/index.html"><input type="checkbox" id="R-section-8eb2a58628ca595eccda7f8f066488f0" aria-controls="R-subsections-8eb2a58628ca595eccda7f8f066488f0"><label for="R-section-8eb2a58628ca595eccda7f8f066488f0"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú 03. Layouts en Java Swing &amp; UI</span></label><a class="padding" href="../../../00ayudas/03layouts/index.html">03. Layouts en Java Swing &amp; UI<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-8eb2a58628ca595eccda7f8f066488f0" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/03layouts/00dialogosenswing/index.html"><a class="padding" href="../../../00ayudas/03layouts/00dialogosenswing/index.html">01 Ventanas de entrada de datos, mensajes y archivos<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/03layouts/05gridbaglayout/index.html"><a class="padding" href="../../../00ayudas/03layouts/05gridbaglayout/index.html">05 GridBagLayout<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/04patronesdisenho/index.html"><input type="checkbox" id="R-section-1c69dc8b47fb6fae98603b1968118cf8" aria-controls="R-subsections-1c69dc8b47fb6fae98603b1968118cf8"><label for="R-section-1c69dc8b47fb6fae98603b1968118cf8"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú 04. Patrones de diseño</span></label><a class="padding" href="../../../00ayudas/04patronesdisenho/index.html">04. Patrones de diseño<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-1c69dc8b47fb6fae98603b1968118cf8" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/04patronesdisenho/01designprinciples/index.html"><a class="padding" href="../../../00ayudas/04patronesdisenho/01designprinciples/index.html">01. Principios de diseño<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/04patronesdisenho/02singleton/index.html"><a class="padding" href="../../../00ayudas/04patronesdisenho/02singleton/index.html">02. Patrón Singleton<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/04patronesdisenho/03objetosinmutables/index.html"><a class="padding" href="../../../00ayudas/04patronesdisenho/03objetosinmutables/index.html">03. Objetos Inmutables<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/index.html"><input type="checkbox" id="R-section-36a825e367dd24b7cccca030c91ea60b" aria-controls="R-subsections-36a825e367dd24b7cccca030c91ea60b"><label for="R-section-36a825e367dd24b7cccca030c91ea60b"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú 05. Programación en Kotlin</span></label><a class="padding" href="../../../00ayudas/05kotlin/index.html">05. Programación en Kotlin<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-36a825e367dd24b7cccca030c91ea60b" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/index.html"><input type="checkbox" id="R-section-312a90d18fa918ef04d04e75820d73c0" aria-controls="R-subsections-312a90d18fa918ef04d04e75820d73c0"><label for="R-section-312a90d18fa918ef04d04e75820d73c0"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú Programación estructurada básica</span></label><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/index.html">Programación estructurada básica<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-312a90d18fa918ef04d04e75820d73c0" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/10.-la_funcion_main/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/10.-la_funcion_main/index.html">La funcion main()<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/20.-la_funcion-print-_y-_println/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/20.-la_funcion-print-_y-_println/index.html">La funcion print() y println()<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/30.-comentarios/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/30.-comentarios/index.html">Comentarios<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/40.-variables-_-literales-_y_-sentencia_-de_-asignación/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/40.-variables-_-literales-_y_-sentencia_-de_-asignaci%c3%b3n/index.html">Variables, literales y sentencia de asignación<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/50.-palabras_reservadas/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/50.-palabras_reservadas/index.html">Palabras reservadas<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/tipos_de_datos_y_operadores_basicos/index.html"><input type="checkbox" id="R-section-94a2bfa5cc4fa0f33d0f2cf1c75e3265" aria-controls="R-subsections-94a2bfa5cc4fa0f33d0f2cf1c75e3265"><label for="R-section-94a2bfa5cc4fa0f33d0f2cf1c75e3265"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú tipos de datos y operadores</span></label><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/tipos_de_datos_y_operadores_basicos/index.html">tipos de datos y operadores<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-94a2bfa5cc4fa0f33d0f2cf1c75e3265" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/tipos_de_datos_y_operadores_basicos/60.tipos_de_datos_basicos/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/tipos_de_datos_y_operadores_basicos/60.tipos_de_datos_basicos/index.html">Tipos de datos básicos<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/tipos_de_datos_y_operadores_basicos/70.tipos_numericos/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/tipos_de_datos_y_operadores_basicos/70.tipos_numericos/index.html">Tipos Numéricos<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/tipos_de_datos_y_operadores_basicos/80.tipos_no_-numericos/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/tipos_de_datos_y_operadores_basicos/80.tipos_no_-numericos/index.html">Tipos básicos  No Numéricos<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/tipos_de_datos_y_operadores_basicos/90.conversion_de_tipos/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/tipos_de_datos_y_operadores_basicos/90.conversion_de_tipos/index.html">Conversión de Tipos<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/tipos_de_datos_y_operadores_basicos/100.-operadores/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/tipos_de_datos_y_operadores_basicos/100.-operadores/index.html">Operadores<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/tipos_de_datos_y_operadores_basicos/110.-expresiones_booleanas/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/tipos_de_datos_y_operadores_basicos/110.-expresiones_booleanas/index.html">Expresiones booleanas<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/coleccionesbasicas/index.html"><input type="checkbox" id="R-section-840caf4a5c9da596bf4345cae4c798ab" aria-controls="R-subsections-840caf4a5c9da596bf4345cae4c798ab"><label for="R-section-840caf4a5c9da596bf4345cae4c798ab"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú colecciones básicas</span></label><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/coleccionesbasicas/index.html">colecciones básicas<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-840caf4a5c9da596bf4345cae4c798ab" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/coleccionesbasicas/120.-string/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/coleccionesbasicas/120.-string/index.html">String<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/coleccionesbasicas/130.-listas/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/coleccionesbasicas/130.-listas/index.html">Listas<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/coleccionesbasicas/140.rangos-/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/coleccionesbasicas/140.rangos-/index.html">Rangos<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/150.-entrada_teclado/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/150.-entrada_teclado/index.html">Entrada de datos por teclado con readln()<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/control_de_-flujo/index.html"><input type="checkbox" id="R-section-f79f31fcf5ae1f44691bca6f05e1710f" aria-controls="R-subsections-f79f31fcf5ae1f44691bca6f05e1710f"><label for="R-section-f79f31fcf5ae1f44691bca6f05e1710f"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú control de flujo</span></label><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/control_de_-flujo/index.html">control de flujo<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-f79f31fcf5ae1f44691bca6f05e1710f" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/control_de_-flujo/151.-control_de_flujo/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/control_de_-flujo/151.-control_de_flujo/index.html">Control de flujo<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/control_de_-flujo/160.-sentencia_condicional_if/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/control_de_-flujo/160.-sentencia_condicional_if/index.html">Sentencia condicional IF<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/control_de_-flujo/190.-sentecia_when/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/control_de_-flujo/190.-sentecia_when/index.html">Sentencia when<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/control_de_-flujo/200.-bucle_for/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/control_de_-flujo/200.-bucle_for/index.html">Bucle for<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/control_de_-flujo/210.-while_y_do_while/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/control_de_-flujo/210.-while_y_do_while/index.html">while y do while<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/control_de_-flujo/220.-variables_locales_y_bloques/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/control_de_-flujo/220.-variables_locales_y_bloques/index.html">variables locales y bloques<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/control_de_-flujo/230.-break_y_continue/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/control_de_-flujo/230.-break_y_continue/index.html">break y continue<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/control_de_-flujo/240.otras_formas_de_iterar/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/control_de_-flujo/240.otras_formas_de_iterar/index.html">Otras formas de iterar<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/250.-funciones/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/250.-funciones/index.html">Funciones<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/260.el_valor_nulo/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/260.el_valor_nulo/index.html">El valor nulo<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/270.-readline/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/270.-readline/index.html">Entrada de datos por teclado con readLine()<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/mas_sobre_colecciones_basicas/index.html"><input type="checkbox" id="R-section-44784ce5c237bf9124eefe20ce36272f" aria-controls="R-subsections-44784ce5c237bf9124eefe20ce36272f"><label for="R-section-44784ce5c237bf9124eefe20ce36272f"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú más sobre colecciones básicas</span></label><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/mas_sobre_colecciones_basicas/index.html">más sobre colecciones básicas<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-44784ce5c237bf9124eefe20ce36272f" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/mas_sobre_colecciones_basicas/310.-arrays/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/mas_sobre_colecciones_basicas/310.-arrays/index.html">Arrays<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/mas_sobre_colecciones_basicas/320.-listas/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/mas_sobre_colecciones_basicas/320.-listas/index.html">Listas<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/mas_sobre_colecciones_basicas/330.rangos-/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/mas_sobre_colecciones_basicas/330.rangos-/index.html">Rangos<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/mas_sobre_colecciones_basicas/340.mapas-/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/mas_sobre_colecciones_basicas/340.mapas-/index.html">Mapas<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/01progestructurada/mas_sobre_colecciones_basicas/350.iterar_sobre_colecciones/index.html"><a class="padding" href="../../../00ayudas/05kotlin/01progestructurada/mas_sobre_colecciones_basicas/350.iterar_sobre_colecciones/index.html">Iterar sobre colecciones<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/02progoo/index.html"><input type="checkbox" id="R-section-1ef1a5ed807dacffeb206c0950804c3a" aria-controls="R-subsections-1ef1a5ed807dacffeb206c0950804c3a"><label for="R-section-1ef1a5ed807dacffeb206c0950804c3a"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú Programación orientada a objetos</span></label><a class="padding" href="../../../00ayudas/05kotlin/02progoo/index.html">Programación orientada a objetos<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-1ef1a5ed807dacffeb206c0950804c3a" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/02progoo/1010.objetos_y_clases/index.html"><a class="padding" href="../../../00ayudas/05kotlin/02progoo/1010.objetos_y_clases/index.html">Objetos y clases<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/02progoo/1020.constructores-/index.html"><a class="padding" href="../../../00ayudas/05kotlin/02progoo/1020.constructores-/index.html">Constructores<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/02progoo/1030.propiedades/index.html"><a class="padding" href="../../../00ayudas/05kotlin/02progoo/1030.propiedades/index.html">Propiedades<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/02progoo/1040.sobreescribir_tostring/index.html"><a class="padding" href="../../../00ayudas/05kotlin/02progoo/1040.sobreescribir_tostring/index.html">Sobreescribir toString()<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/02progoo/1060.modificadoresvisibilidad/index.html"><a class="padding" href="../../../00ayudas/05kotlin/02progoo/1060.modificadoresvisibilidad/index.html">modificadores de visibilidad<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/02progoo/1070.enum/index.html"><a class="padding" href="../../../00ayudas/05kotlin/02progoo/1070.enum/index.html">clases Enum<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/02progoo/1100.composicion/index.html"><a class="padding" href="../../../00ayudas/05kotlin/02progoo/1100.composicion/index.html">Composición<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/02progoo/1200.herencia/index.html"><a class="padding" href="../../../00ayudas/05kotlin/02progoo/1200.herencia/index.html">Herencia<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/02progoo/1220.clases_abstractas_interfaces/index.html"><a class="padding" href="../../../00ayudas/05kotlin/02progoo/1220.clases_abstractas_interfaces/index.html">Clases abstractas e Interfaces<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/02progoo/1240.dataclases/index.html"><a class="padding" href="../../../00ayudas/05kotlin/02progoo/1240.dataclases/index.html">Data Clases<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/02progoo/1250.keywordobject/index.html"><a class="padding" href="../../../00ayudas/05kotlin/02progoo/1250.keywordobject/index.html">La palabra reservada object. Companion object, objetos singleton y objetos expressions<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/02progoo/1255.excepciones/index.html"><a class="padding" href="../../../00ayudas/05kotlin/02progoo/1255.excepciones/index.html">Excepciones en Kotlin<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/02progoo/1260.genericos/index.html"><a class="padding" href="../../../00ayudas/05kotlin/02progoo/1260.genericos/index.html">Genéricos<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/02progoo/1265.clausulatypealiases/index.html"><a class="padding" href="../../../00ayudas/05kotlin/02progoo/1265.clausulatypealiases/index.html">cláusula typealiases<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/02progoo/1270.delegacion/index.html"><a class="padding" href="../../../00ayudas/05kotlin/02progoo/1270.delegacion/index.html">Delegación con cláusula by<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/02progoo/1280.claesanidadaseinternas/index.html"><a class="padding" href="../../../00ayudas/05kotlin/02progoo/1280.claesanidadaseinternas/index.html">Clases anidadas e internas<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/03progfuncional/index.html"><input type="checkbox" id="R-section-8bbd4a78f07b64e8b2bc4b83b71f1498" aria-controls="R-subsections-8bbd4a78f07b64e8b2bc4b83b71f1498"><label for="R-section-8bbd4a78f07b64e8b2bc4b83b71f1498"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú Programación funcional</span></label><a class="padding" href="../../../00ayudas/05kotlin/03progfuncional/index.html">Programación funcional<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-8bbd4a78f07b64e8b2bc4b83b71f1498" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/03progfuncional/2010.funcioneskotlin/index.html"><a class="padding" href="../../../00ayudas/05kotlin/03progfuncional/2010.funcioneskotlin/index.html">sintáxis avanzada de las  funciones kotlin<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/03progfuncional/2020.-basesdepf/index.html"><a class="padding" href="../../../00ayudas/05kotlin/03progfuncional/2020.-basesdepf/index.html">algunos conceptos básicos de programación funcional<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/03progfuncional/2030.funcionesordensuperiorcolecciones/index.html"><a class="padding" href="../../../00ayudas/05kotlin/03progfuncional/2030.funcionesordensuperiorcolecciones/index.html">funciones de orden superior y colecciones<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/00ayudas/05kotlin/03progfuncional/2040.funcionesordensuperiorysequence/index.html"><a class="padding" href="../../../00ayudas/05kotlin/03progfuncional/2040.funcionesordensuperiorysequence/index.html">funciones de orden superior y sequence<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li></ul></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/index.html"><input type="checkbox" id="R-section-cf4ee7bae7fca4e692355524601fe599" aria-controls="R-subsections-cf4ee7bae7fca4e692355524601fe599"><label for="R-section-cf4ee7bae7fca4e692355524601fe599"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú UD 1. Acceso a ficheros, flujos, serialización de objetos, ficheros JSON y XML</span></label><a class="padding" href="../../../01accesoficheros/index.html">UD 1. Acceso a ficheros, flujos, serialización de objetos, ficheros JSON y XML<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-cf4ee7bae7fca4e692355524601fe599" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/01javaio/index.html"><input type="checkbox" id="R-section-ec127efd28751c1f836952c8dac2374d" aria-controls="R-subsections-ec127efd28751c1f836952c8dac2374d"><label for="R-section-ec127efd28751c1f836952c8dac2374d"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú 01.01 Java IO. Acceso a ficheros, flujos, serialización de objetos.</span></label><a class="padding" href="../../../01accesoficheros/01javaio/index.html">01.01 Java IO. Acceso a ficheros, flujos, serialización de objetos.<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-ec127efd28751c1f836952c8dac2374d" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/01javaio/0100javaiointro/index.html"><a class="padding" href="../../../01accesoficheros/01javaio/0100javaiointro/index.html">01.00 Java IO. Introducción.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/01javaio/0101javaiofile/index.html"><a class="padding" href="../../../01accesoficheros/01javaio/0101javaiofile/index.html">01.01 La clase File<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/01javaio/0102randomaccessfile/index.html"><a class="padding" href="../../../01accesoficheros/01javaio/0102randomaccessfile/index.html">01.02 La clase RandomAccessFile<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/01javaio/0103javaiostreams/index.html"><a class="padding" href="../../../01accesoficheros/01javaio/0103javaiostreams/index.html">01.03 Flujos de E/S<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/01javaio/0104bytestream/index.html"><a class="padding" href="../../../01accesoficheros/01javaio/0104bytestream/index.html">01.04 Flujos de byte<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/01javaio/0105characterstream/index.html"><a class="padding" href="../../../01accesoficheros/01javaio/0105characterstream/index.html">01.05 Flujos de caracteres<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/01javaio/0106javaiobuffer/index.html"><a class="padding" href="../../../01accesoficheros/01javaio/0106javaiobuffer/index.html">01.06 Flujos de E/S con Buffer<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/01javaio/0107javaistream/index.html"><a class="padding" href="../../../01accesoficheros/01javaio/0107javaistream/index.html">01.07 Operaciones comunes con flujos de E/S.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/01javaio/0109ejercicios/index.html"><a class="padding" href="../../../01accesoficheros/01javaio/0109ejercicios/index.html">Ejercicios<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/02javanio2/index.html"><input type="checkbox" id="R-section-2d1e1941df73311305891c0dca6583fd" aria-controls="R-subsections-2d1e1941df73311305891c0dca6583fd"><label for="R-section-2d1e1941df73311305891c0dca6583fd"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú 01.02 Java NIO.2</span></label><a class="padding" href="../../../01accesoficheros/02javanio2/index.html">01.02 Java NIO.2<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-2d1e1941df73311305891c0dca6583fd" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/02javanio2/0202javaniopath/index.html"><a class="padding" href="../../../01accesoficheros/02javanio2/0202javaniopath/index.html">02.01. La interface Path<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/02javanio2/0203javaniopathcreate/index.html"><a class="padding" href="../../../01accesoficheros/02javanio2/0203javaniopathcreate/index.html">02.03. Creación de Path<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/02javanio2/0204javaniopath/index.html"><a class="padding" href="../../../01accesoficheros/02javanio2/0204javaniopath/index.html">02.04. Operaciones comunes de Java NIO.2<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/02javanio2/0205javaniopathmethods/index.html"><a class="padding" href="../../../01accesoficheros/02javanio2/0205javaniopathmethods/index.html">02.05. Métodos y con Path Java NIO.2<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/02javanio2/0206javaniostreams/index.html"><a class="padding" href="../../../01accesoficheros/02javanio2/0206javaniostreams/index.html">02.06. Programación funcional con Java NIO.2<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/03json/index.html"><input type="checkbox" id="R-section-662c48eb0e2f97ba0e58c14a690fca47" aria-controls="R-subsections-662c48eb0e2f97ba0e58c14a690fca47"><label for="R-section-662c48eb0e2f97ba0e58c14a690fca47"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú 01.03 JSON en Java</span></label><a class="padding" href="../../../01accesoficheros/03json/index.html">01.03 JSON en Java<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-662c48eb0e2f97ba0e58c14a690fca47" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/03json/0300jsonintro/index.html"><a class="padding" href="../../../01accesoficheros/03json/0300jsonintro/index.html">01.00. Introducción a JSON<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/03json/0301jsonjs/index.html"><a class="padding" href="../../../01accesoficheros/03json/0301jsonjs/index.html">01.01. JSON con el API JavaScript de Java<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/03json/0302jsonlibraries/index.html"><a class="padding" href="../../../01accesoficheros/03json/0302jsonlibraries/index.html">01.02. Bibliotecas JSON para Java<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/03json/0304gson/index.html"><a class="padding" href="../../../01accesoficheros/03json/0304gson/index.html">01.03. Gson. Introducción<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/03json/0304gsondiagram/index.html"><a class="padding" href="../../../01accesoficheros/03json/0304gsondiagram/index.html">01.03. Gson. Diagrama de clases (e interfaces)<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/03json/0305gsoncreate/index.html"><a class="padding" href="../../../01accesoficheros/03json/0305gsoncreate/index.html">01.04. Gson. Creación de instancias Gson<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/03json/0306creaciongson/index.html"><a class="padding" href="../../../01accesoficheros/03json/0306creaciongson/index.html">01.05 Gson. Creación y lectura de objetos JSON<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/03json/0306transformacion/index.html"><a class="padding" href="../../../01accesoficheros/03json/0306transformacion/index.html">01.06. Gson. Transformación de objetos JSON personalizada<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/03json/0307jsonreader01/index.html"><a class="padding" href="../../../01accesoficheros/03json/0307jsonreader01/index.html">01.07 Gson. JsonReader<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/03json/0308jsonrename/index.html"><a class="padding" href="../../../01accesoficheros/03json/0308jsonrename/index.html">01.08 Gson. Renombrar atributos <i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/03json/0309jsonserialize/index.html"><a class="padding" href="../../../01accesoficheros/03json/0309jsonserialize/index.html">01.09 Resumen Serialización Gson<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/03json/0310jsondeserialize/index.html"><a class="padding" href="../../../01accesoficheros/03json/0310jsondeserialize/index.html">01.09 Resumen Deserialización Gson<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/03json/098ejercicio/index.html"><a class="padding" href="../../../01accesoficheros/03json/098ejercicio/index.html">Ejercicio. Trivial<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/01accesoficheros/0105ejercicios/index.html"><a class="padding" href="../../../01accesoficheros/0105ejercicios/index.html">Ejercicios y recursos<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/index.html"><input type="checkbox" id="R-section-342b2e95b9611e1108f16a11c61cd1f2" aria-controls="R-subsections-342b2e95b9611e1108f16a11c61cd1f2"><label for="R-section-342b2e95b9611e1108f16a11c61cd1f2"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú UD 2. Acceso a BD remotas relacionales</span></label><a class="padding" href="../../../02accesobd/index.html">UD 2. Acceso a BD remotas relacionales<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-342b2e95b9611e1108f16a11c61cd1f2" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/02db/index.html"><input type="checkbox" id="R-section-66326b82828cdbb6e30c77e924342908" aria-controls="R-subsections-66326b82828cdbb6e30c77e924342908"><label for="R-section-66326b82828cdbb6e30c77e924342908"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú 02.02 JDBC. Introducción a las Bases de datos relacionales.</span></label><a class="padding" href="../../../02accesobd/02db/index.html">02.02 JDBC. Introducción a las Bases de datos relacionales.<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-66326b82828cdbb6e30c77e924342908" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/02db/0101databases/index.html"><a class="padding" href="../../../02accesobd/02db/0101databases/index.html">02.01. Sistemas gestores de bases de datos<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/02db/0102introdb/index.html"><a class="padding" href="../../../02accesobd/02db/0102introdb/index.html">02. Introducción a las bases de datos relacionales<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/02db/0103postgresql/index.html"><a class="padding" href="../../../02accesobd/02db/0103postgresql/index.html">03. PostgreSQL<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/02db/0104postgres01/index.html"><a class="padding" href="../../../02accesobd/02db/0104postgres01/index.html">04. PostgreSQL. Características y Operadores.<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/03procesandosql/index.html"><input type="checkbox" id="R-section-4b93c45cd959371d7c20dcc7da6d632c" aria-controls="R-subsections-4b93c45cd959371d7c20dcc7da6d632c"><label for="R-section-4b93c45cd959371d7c20dcc7da6d632c"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú 02.03. Procesamiento de sentencias SQL.</span></label><a class="padding" href="../../../02accesobd/03procesandosql/index.html">02.03. Procesamiento de sentencias SQL.<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-4b93c45cd959371d7c20dcc7da6d632c" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/03procesandosql/0101procesamientosql/index.html"><a class="padding" href="../../../02accesobd/03procesandosql/0101procesamientosql/index.html">01. Procesamiento de sentencias SQL.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/03procesandosql/0102conexiones/index.html"><a class="padding" href="../../../02accesobd/03procesandosql/0102conexiones/index.html">02. Conexiones a BD<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/03procesandosql/0103excepcionessql/index.html"><a class="padding" href="../../../02accesobd/03procesandosql/0103excepcionessql/index.html">03. Excepciones SQLException<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/03procesandosql/0104resultset/index.html"><a class="padding" href="../../../02accesobd/03procesandosql/0104resultset/index.html">04. ResultSet<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/03procesandosql/0105resultsetbatch/index.html"><a class="padding" href="../../../02accesobd/03procesandosql/0105resultsetbatch/index.html">05. Actualizaciones por lotes con ResultSet<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/03procesandosql/0106preparedst/index.html"><a class="padding" href="../../../02accesobd/03procesandosql/0106preparedst/index.html">06. Prepared Statement<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/03procesandosql/0107transacciones/index.html"><a class="padding" href="../../../02accesobd/03procesandosql/0107transacciones/index.html">07. Transacciones<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/03procesandosql/0108clavesgeneradas/index.html"><a class="padding" href="../../../02accesobd/03procesandosql/0108clavesgeneradas/index.html">08. Claves Generadas<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/03procesandosql/0109largeobjects/index.html"><a class="padding" href="../../../02accesobd/03procesandosql/0109largeobjects/index.html">09. Objectos grandes<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/03procesandosql/0111rowset/index.html"><a class="padding" href="../../../02accesobd/03procesandosql/0111rowset/index.html">11. RowSet<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/03procesandosql/0115boletines/index.html"><a class="padding" href="../../../02accesobd/03procesandosql/0115boletines/index.html">15. Ejercicios y archivos de la unidad<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/02accesobd/99proyecto/index.html"><a class="padding" href="../../../02accesobd/99proyecto/index.html">Proyecto 1ª evaluación<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="parent " data-nav-id="https://manuais.pages.iessanclemente.net/03orm/index.html"><input type="checkbox" id="R-section-87c8b6c6cd354a309db816f73d185be0" aria-controls="R-subsections-87c8b6c6cd354a309db816f73d185be0" checked><label for="R-section-87c8b6c6cd354a309db816f73d185be0"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú UD 3. Object/Relational Mapping (ORM). JPA e Hibernate</span></label><a class="padding" href="../../index.html">UD 3. Object/Relational Mapping (ORM). JPA e Hibernate<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-87c8b6c6cd354a309db816f73d185be0" class="collapsible-menu">
            <li class="parent " data-nav-id="https://manuais.pages.iessanclemente.net/03orm/jpa/index.html"><input type="checkbox" id="R-section-5aaca10806a740cf4d784be6e24473b9" aria-controls="R-subsections-5aaca10806a740cf4d784be6e24473b9" checked><label for="R-section-5aaca10806a740cf4d784be6e24473b9"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú 03.01. Jakarta Persistence (JPA).</span></label><a class="padding" href="../index.html">03.01. Jakarta Persistence (JPA).<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-5aaca10806a740cf4d784be6e24473b9" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/03orm/jpa/01jpa/index.html"><a class="padding" href="../01jpa/index.html">01. Jakarta Persistence (JPA).<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/03orm/jpa/02jpavshibernate/index.html"><a class="padding" href="../02jpavshibernate/index.html">02. JPA vs Hibernate.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/03orm/jpa/03jpaejercicio/index.html"><a class="padding" href="../03jpaejercicio/index.html">03. Ejercicio básico de JPA.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/03orm/jpa/04entitymanager/index.html"><a class="padding" href="../04entitymanager/index.html">04. Gestión de entidades con EntityManager.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/03orm/jpa/05mapeoentidades/index.html"><a class="padding" href="../05mapeoentidades/index.html">05. Mapeo de entidades.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/03orm/jpa/06relaciones/index.html"><a class="padding" href="../06relaciones/index.html">06. Relaciones JPA.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/03orm/jpa/07embedidos/index.html"><a class="padding" href="../07embedidos/index.html">07. Objetos embebidos.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/03orm/jpa/08colecciones/index.html"><a class="padding" href="../08colecciones/index.html">08. Mapeo de colecciones.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/03orm/jpa/09queries/index.html"><a class="padding" href="../09queries/index.html">09. Consultas.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="active " data-nav-id="https://manuais.pages.iessanclemente.net/03orm/jpa/10jpql/index.html"><a class="padding" href="index.html">10. JPQL.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/03orm/jpa/11paginacion/index.html"><a class="padding" href="../11paginacion/index.html">11. Paginación de consultas.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/03orm/jpa/12herencia/index.html"><a class="padding" href="../12herencia/index.html">12. Herencia.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/03orm/jpa/14ejercicios/index.html"><a class="padding" href="../14ejercicios/index.html">Ejercicios de la unidad de JPA<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/03orm/jpa/15boletines/index.html"><a class="padding" href="../15boletines/index.html">Ejercicios de refuerzo.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/03orm/jpa/16dependencias/index.html"><a class="padding" href="../16dependencias/index.html">Dependencias Maven.<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/03orm/95singleton/index.html"><a class="padding" href="../../95singleton/index.html">03.02. Patrón Singleton.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/03orm/96ejerciciosrepaso/index.html"><a class="padding" href="../../96ejerciciosrepaso/index.html">03.03. Ejercicios de refuerzo (Violín).<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/03orm/97ejerciciosrepaso2/index.html"><a class="padding" href="../../97ejerciciosrepaso2/index.html">03.04 Ejercicios de refuerzo (II)<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/03orm/98ejerciciosrepaso3/index.html"><a class="padding" href="../../98ejerciciosrepaso3/index.html">03.05 Ejercicios de refuerzo (III)<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/04spring/index.html"><input type="checkbox" id="R-section-ffae27028787f9b794af8498ce8bc361" aria-controls="R-subsections-ffae27028787f9b794af8498ce8bc361"><label for="R-section-ffae27028787f9b794af8498ce8bc361"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú UD 4. Spring.</span></label><a class="padding" href="../../../04spring/index.html">UD 4. Spring.<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-ffae27028787f9b794af8498ce8bc361" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/04spring/01springboot/index.html"><a class="padding" href="../../../04spring/01springboot/index.html">01. Spring Boot.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/04spring/02springdata/index.html"><a class="padding" href="../../../04spring/02springdata/index.html">02. Spring Data JPA.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/04spring/03practicajpadata/index.html"><a class="padding" href="../../../04spring/03practicajpadata/index.html">03. Práctica con de Spring Data JPA y REST.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/04spring/04repositorios/index.html"><a class="padding" href="../../../04spring/04repositorios/index.html">04. Repositorios String Data.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/04spring/05paginacion/index.html"><a class="padding" href="../../../04spring/05paginacion/index.html">05. Paginación y Ordenación usando Spring Data JPA.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/04spring/06paginacionrest/index.html"><a class="padding" href="../../../04spring/06paginacionrest/index.html">06. Paginación y Ordenación usando Spring Data REST.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/04spring/07vaadin/index.html"><a class="padding" href="../../../04spring/07vaadin/index.html">07. Spring Data JPA con Vaadin (práctica).<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/04spring/08ejecutores/index.html"><a class="padding" href="../../../04spring/08ejecutores/index.html">08. Ejecutores al inicio con Spring Boot<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/04spring/09serviciocompo/index.html"><a class="padding" href="../../../04spring/09serviciocompo/index.html">09. Servicios, componentes y repositorios<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/04spring/10servicios/index.html"><a class="padding" href="../../../04spring/10servicios/index.html">10. Servicios<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/04spring/11proyecto/index.html"><input type="checkbox" id="R-section-f25e02e15b94f5cb39179f26efa74bfe" aria-controls="R-subsections-f25e02e15b94f5cb39179f26efa74bfe"><label for="R-section-f25e02e15b94f5cb39179f26efa74bfe"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú 11. Proyecto Spring. Cuestionarios.</span></label><a class="padding" href="../../../04spring/11proyecto/index.html">11. Proyecto Spring. Cuestionarios.<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-f25e02e15b94f5cb39179f26efa74bfe" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/04spring/11proyecto/01modelo/index.html"><a class="padding" href="../../../04spring/11proyecto/01modelo/index.html">01. Modelo de datos<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/04spring/11proyecto/02dto/index.html"><a class="padding" href="../../../04spring/11proyecto/02dto/index.html">02. DTO<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/04spring/11proyecto/03repositorios/index.html"><a class="padding" href="../../../04spring/11proyecto/03repositorios/index.html">03. Repositorios<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/04spring/11proyecto/04controller/index.html"><a class="padding" href="../../../04spring/11proyecto/04controller/index.html">04. Controller<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/04spring/11proyecto/05resultados/index.html"><a class="padding" href="../../../04spring/11proyecto/05resultados/index.html">05. Pruebas y mejoras<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/04spring/12springproj/index.html"><a class="padding" href="../../../04spring/12springproj/index.html">12. Proyecto Spring. Cuestionarios.<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/05basesdatosnonsql/index.html"><input type="checkbox" id="R-section-a0dc28a495fca757d219f1aec2ecff4c" aria-controls="R-subsections-a0dc28a495fca757d219f1aec2ecff4c"><label for="R-section-a0dc28a495fca757d219f1aec2ecff4c"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú UD 5. Bases de datos no SQL. MongoDB</span></label><a class="padding" href="../../../05basesdatosnonsql/index.html">UD 5. Bases de datos no SQL. MongoDB<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-a0dc28a495fca757d219f1aec2ecff4c" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/05basesdatosnonsql/mongodb/01nosql/index.html"><a class="padding" href="../../../05basesdatosnonsql/mongodb/01nosql/index.html">01. Bases de datos NoSQL.<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/05basesdatosnonsql/mongodb/03springmongodb/index.html"><a class="padding" href="../../../05basesdatosnonsql/mongodb/03springmongodb/index.html">03. Conexión a MongoDB con String Data MongoDB (práctica).<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/index.html"><input type="checkbox" id="R-section-8d4041f058dd2262e83830e1db38cc6d" aria-controls="R-subsections-8d4041f058dd2262e83830e1db38cc6d"><label for="R-section-8d4041f058dd2262e83830e1db38cc6d"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú Git</span></label><a class="padding" href="../../../git/index.html">Git<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-8d4041f058dd2262e83830e1db38cc6d" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/1.introduccion_git/index.html"><input type="checkbox" id="R-section-a87776bdac862bf972ec945bc124b884" aria-controls="R-subsections-a87776bdac862bf972ec945bc124b884"><label for="R-section-a87776bdac862bf972ec945bc124b884"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú Introducción git</span></label><a class="padding" href="../../../git/1.introduccion_git/index.html">Introducción git<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-a87776bdac862bf972ec945bc124b884" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/1.introduccion_git/1.introduccion_git/index.html"><a class="padding" href="../../../git/1.introduccion_git/1.introduccion_git/index.html">Introducción a git<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/1.introduccion_git/2.estados_git/index.html"><a class="padding" href="../../../git/1.introduccion_git/2.estados_git/index.html">Estados de git<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/1.introduccion_git/3.instalacion_git/index.html"><a class="padding" href="../../../git/1.introduccion_git/3.instalacion_git/index.html">Instalación de git<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/2.fundamentos_git/index.html"><input type="checkbox" id="R-section-b63515bb4dcfe678de9ffac7a29c1e77" aria-controls="R-subsections-b63515bb4dcfe678de9ffac7a29c1e77"><label for="R-section-b63515bb4dcfe678de9ffac7a29c1e77"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú Fundamentos git</span></label><a class="padding" href="../../../git/2.fundamentos_git/index.html">Fundamentos git<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-b63515bb4dcfe678de9ffac7a29c1e77" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/2.fundamentos_git/1.configuracion_git/index.html"><a class="padding" href="../../../git/2.fundamentos_git/1.configuracion_git/index.html">Configuracion de git<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/2.fundamentos_git/2.inicializar_repo/index.html"><a class="padding" href="../../../git/2.fundamentos_git/2.inicializar_repo/index.html">Inicializando repositorio<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/2.fundamentos_git/3.cambios/index.html"><a class="padding" href="../../../git/2.fundamentos_git/3.cambios/index.html">Cambios en el repositorio<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/2.fundamentos_git/4.ignorar_archivos/index.html"><a class="padding" href="../../../git/2.fundamentos_git/4.ignorar_archivos/index.html">Archivos Ignorados<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/2.fundamentos_git/5.checkout/index.html"><a class="padding" href="../../../git/2.fundamentos_git/5.checkout/index.html">Git checkout<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/2.fundamentos_git/6.log/index.html"><a class="padding" href="../../../git/2.fundamentos_git/6.log/index.html">Git Log<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/2.fundamentos_git/7.archivos_modificados/index.html"><a class="padding" href="../../../git/2.fundamentos_git/7.archivos_modificados/index.html">Archivos modificados<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/2.fundamentos_git/8.cambios/index.html"><a class="padding" href="../../../git/2.fundamentos_git/8.cambios/index.html">Archivos modificados<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/2.fundamentos_git/9.eliminar_archivos/index.html"><a class="padding" href="../../../git/2.fundamentos_git/9.eliminar_archivos/index.html">Opciones con archivos<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/2.fundamentos_git/10.limitar/index.html"><a class="padding" href="../../../git/2.fundamentos_git/10.limitar/index.html">Historial de confirmaciones<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/3.remotos/index.html"><a class="padding" href="../../../git/3.remotos/index.html">Remotos<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/4.etiquetado/index.html"><a class="padding" href="../../../git/4.etiquetado/index.html">Etiquetado<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/5.ramas_git/index.html"><input type="checkbox" id="R-section-d8234a81ae190365829886d9d8a058a7" aria-controls="R-subsections-d8234a81ae190365829886d9d8a058a7"><label for="R-section-d8234a81ae190365829886d9d8a058a7"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenú Ramas Git</span></label><a class="padding" href="../../../git/5.ramas_git/index.html">Ramas Git<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-d8234a81ae190365829886d9d8a058a7" class="collapsible-menu">
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/5.ramas_git/1.ramificaciones_git/index.html"><a class="padding" href="../../../git/5.ramas_git/1.ramificaciones_git/index.html">Ramificación<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/5.ramas_git/2.ramificaciones_remotas/index.html"><a class="padding" href="../../../git/5.ramas_git/2.ramificaciones_remotas/index.html">Ramas Remotas<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="https://manuais.pages.iessanclemente.net/git/6.claves_ssh/index.html"><a class="padding" href="../../../git/6.claves_ssh/index.html">Claves SSH<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <div class="nav-title padding">Más</div>
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="https://mcshelby.github.io/hugo-theme-relearn/shortcodes/attachments/"><a class="padding" href="https://mcshelby.github.io/hugo-theme-relearn/shortcodes/attachments/" rel="external" target="_blank"><i class='fas fa-fw fa-bookmark'></i>  Cómo editar plantilla<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="https://www.iessanclemente.net/"><a class="padding" href="https://www.iessanclemente.net/" rel="external" target="_blank"><i class='fas fa-home'></i> IES Tubalcain<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/categories"><a class="padding" href="https://manuais.pages.iessanclemente.net/plantillas/dam/ad/categories"><i class='fa-fw fas fa-layer-group'></i> Categories<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/tags"><a class="padding" href="https://manuais.pages.iessanclemente.net/plantillas/dam/ad/tags"><i class='fa-fw fas fa-tags'></i> Tags<i class="fa-fw fas fa-check read-icon"></i></a></li>
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
            <li class="R-variantswitcher">
              <div class="padding menu-control">
                <i class="fa-fw fas fa-paint-brush"></i>
                <span>&nbsp;</span>
                <div class="control-style">
                  <label class="a11y-only" for="R-select-variant">Tema</label>
                  <select id="R-select-variant">
                    <option id="R-select-variant-blue" value="blue" selected>Blue</option>
                    <option id="R-select-variant-relearn-light" value="relearn-light">Relearn Light</option>
                    <option id="R-select-variant-relearn-dark" value="relearn-dark">Relearn Dark</option>
                    <option id="R-select-variant-learn" value="learn">Learn</option>
                    <option id="R-select-variant-neon" value="neon">Neon</option>
                    <option id="R-select-variant-green" value="green">Green</option>
                    <option id="R-select-variant-red" value="red">Red</option>
                  </select>
                </div>
                <div class="clear"></div>
              </div>
              <script>window.relearn.markVariant();</script>
            </li>
            <li class="R-historyclearer">
              <div class="padding menu-control">
                <i class="fa-fw fas fa-history"></i>
                <span>&nbsp;</span>
                <div class="control-style">
                  <button>Borrar Historial</button>
                </div>
                <div class="clear"></div>
              </div>
            </li>
          </ul>
        </div>
<div id="R-footer">
<div>
    <img src="mirrors.creativecommons.org/presskit/icons/cc.png" height="30" />
    <img src="mirrors.creativecommons.org/presskit/icons/by.png"  height="30"/>
    <img src="mirrors.creativecommons.org/presskit/icons/nc-eu.png"  height="30"/>
    <img src="mirrors.creativecommons.org/presskit/icons/sa.png" height="30" />
</div>
</div>
      </div>
    </aside>
    <script src="../../../js/clipboard/clipboard.min3c2e.js?1749199978" defer></script>
    <script src="../../../js/perfect-scrollbar/perfect-scrollbar.min3c2e.js?1749199978" defer></script>
    <script src="../../../js/theme.min3c2e.js?1749199978" defer></script>
  </body>

<!-- Mirrored from manuais.pages.iessanclemente.net/plantillas/dam/ad/03orm/jpa/10jpql/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Sep 2025 20:45:36 GMT -->
</html>
